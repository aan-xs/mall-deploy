import{_ as W,i as H,c5 as J,j as Q,u as X,ai as Y,r as n,m as B,q as Z,T as h,ca as ee,cb as se,g as te,c as p,e as f,w as I,a as e,F as oe,x as ae,b as a,n as z,t as s,f as y,y as N,aW as S,b1 as le,o as v,aG as c,R as ne,S as re,cc as ue}from"./index-a2850886.js";import{B as ie}from"./index-03c7d4c5.js";import{A as ce}from"./index-42bac163.js";import{P as de,N as _e}from"./index-d7180d63.js";const pe=g=>(ne("data-v-7f0433a8"),g=g(),re(),g),ve=pe(()=>e("div",{style:{height:"46px"}},null,-1)),me={class:"listitem"},he={class:"pic"},fe=["src"],ge={class:"name"},ye={class:"title"},$e={class:"col"},be={class:"title money"},we={class:"line"},Ie={class:"line-item"},Ne={class:"count"},Se={class:"line-item"},Pe={class:"count"},De={key:0,class:"price-content"},ke={class:"line-item"},qe={class:"count"},Le={class:"line-item"},Ce={class:"count"},Ve={class:"line-item"},xe={class:"count"},Be={class:"line-item"},ze={class:"count"},Oe={class:"line-item"},Te={class:"count"},Ae={style:{height:"22rem"}},Ee={key:1,class:"btn"},Fe={__name:"qr_order",setup(g){const P=H(),O=J(),T=Q(),{t:m}=X(),D=Y();let i=n(!0),k=n(0),A=n(0),E=n(0),F=n(0),$=n([]),q=n(0),L=n(0);const d=n("");let _=n(!1);const b=n(!0),R=B(()=>{var t;return(t=T.userInfo)==null?void 0:t.safeword}),U=()=>{R.value?(_.value=!0,i.value=!0):(h(m("\u8BF7\u8BBE\u7F6E\u8D44\u91D1\u5BC6\u7801")),setTimeout(()=>{router.push({path:"/fundsPasswordSettings"})},1500))};Z(()=>{C()});const C=()=>{j()},o=n({}),j=async()=>{b.value=!0;const t=D.query.id;h.loading({duration:0,message:m("loading"),forbidClick:!0}),await ee({orderId:t}).then(l=>{$.value=l.pageList,$.value.forEach(u=>{k.value+=u.systemPrice,A.value+=u.goodsNum,q.value+=u.fees,L.value+=u.tax,E.value+=u.profit}),F.value=k.value+q.value+L.value}),await se({orderId:t}).then(l=>{o.value=l.orderInfo,b.value=!1,h.clear()}).catch(()=>{h.clear()})},K=()=>{const l={orderId:D.query.id,safeword:d.value};ue(l).then(u=>{C(),O.decrement(),document.dispatchEvent(new CustomEvent("reloadOrderList")),setTimeout(()=>{router.push({path:"/passsuess",query:{id:l.orderId}})},1e3)})};te(()=>d.value,t=>{t.length===6&&(h.loading(""),K(),_.value=!1,d.value="")});const V=B(()=>{c((o.sellerDiscountPrice?o.sellerDiscountPrice:o.systemPrice)/1+o.fees/1+o.tax/1);const{sellerDiscountPrice:t,systemPrice:l,fees:u,tax:w}=o.value;return c(Number(t||l)+Number(u)+Number(w))});return(t,l)=>{const u=le,w=de,x=_e,G=ce,M=ie;return v(),p("div",null,[f(u,{fixed:""},{title:I(()=>[y(s(t.$t("\u91C7\u8D2D\u786E\u8BA4")),1)]),_:1}),ve,e("div",{class:z(["list",{"is-ar":a(P)}])},[(v(!0),p(oe,null,ae(a($),r=>(v(),p("div",me,[e("div",he,[e("img",{style:{"object-fit":"contain"},src:r.goodsIcon},null,8,fe)]),e("div",ge,[e("p",ye,s(r.goodsName),1),e("p",$e,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",be,"$"+s(a(c)(r.systemPrice)),1),e("span",null,"x"+s(r.goodsNum),1)])]))),256))],2),Object.keys(o.value).length>0?(v(),p("div",{key:0,class:z(["line-content",{"is-ar":a(P)}])},[e("div",we,[e("div",Ie,[e("p",null,s(t.$t("\u4E70\u5BB6\u4ED8\u6B3E")),1),e("p",Ne,"$"+s(a(c)(o.value.prizeReal)),1)]),e("div",Se,[e("p",null,s(t.$t("\u91C7\u8D2D\u91D1\u989D")),1),e("p",Pe,"$"+s(a(c)(o.value.systemPrice)),1)]),o.value.sellerDiscountPrice?(v(),p("div",De,[y(s(a(m)("\u4F18\u60E0\u4EF7")),1),e("span",null,"$"+s(a(c)(o.value.sellerDiscountPrice)),1),y(", "+s(a(m)("\u91C7\u8D2D\u4F18\u60E0")),1),e("span",null,s(Number(o.value.sellerDiscount)*100)+"%",1)])):N("v-if",!0),e("div",ke,[e("p",null,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",qe,s(o.value.goodsCount),1)]),e("div",Le,[e("p",null,s(t.$t("\u5229\u6DA6")),1),e("p",Ce,"$"+s(a(c)(o.value.profit)),1)]),e("div",Ve,[e("p",null,s(t.$t("\u8FD0\u8D39")),1),e("p",xe,"$"+s(a(c)(o.value.fees)),1)]),e("div",Be,[e("p",null,s(t.$t("\u7A0E")),1),e("p",ze,"$"+s(a(c)(o.value.tax)),1)]),e("div",Oe,[e("p",null,s(t.$t("\u5408\u8BA1")),1),e("p",Te,"$"+s(a(V)),1)])])],2)):N("v-if",!0),f(G,{show:a(_),"onUpdate:show":l[3]||(l[3]=r=>S(_)?_.value=r:_=r),title:a(m)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:I(()=>[e("div",Ae,[f(w,{length:6,value:d.value,focused:a(i),onFocus:l[0]||(l[0]=r=>S(i)?i.value=!0:i=!0)},null,8,["value","focused"]),f(x,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=r=>d.value=r),show:a(i),onBlur:l[2]||(l[2]=r=>S(i)?i.value=!1:i=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"]),!b.value&&o.value.purchStatus/1!==1&&o.value.status/1!==-1&&o.value.status/1!==0&&o.value.status/1!==6?(v(),p("div",Ee,[f(M,{type:"primary",size:"large",onClick:U},{default:I(()=>[y(s(`${t.$t("\u7ACB\u5373\u652F\u4ED8")} $${a(V)}`),1)]),_:1})])):N("v-if",!0)])}}},Ge=W(Fe,[["__scopeId","data-v-7f0433a8"],["__file","D:/Users/zq/zq/mall-app-h5-vue/mall-app-h5-vue/src/views/order/qr_order.vue"]]);export{Ge as default};
