System.register(["./index-legacy-e50317c7.js","./index-legacy-66362861.js","./index-legacy-444e8811.js","./index-legacy-74e66066.js","./index-legacy-3ad63577.js","./index-legacy-e14460f3.js","./index-legacy-80a9786c.js","./function-call-legacy-3ea78303.js","./use-id-legacy-4e161192.js"],(function(e,a){"use strict";var t,l,n,o,c,d,u,i,s,p,r,v,m,f,x,g,h,b,y,w,j,_,V,C,B,k,T,z,E,U=document.createElement("style");return U.textContent=".cancellation-content[data-v-d91fc208]{padding:15px;min-height:calc(100vh - 46px);background-color:#fff}.cancellation-content>.item[data-v-d91fc208]{margin-bottom:20px}.cancellation-content>.item[data-v-d91fc208] textarea::-webkit-input-placeholder{color:#868c9a}.cancellation-content>.item>p[data-v-d91fc208]{font-size:14px;margin-bottom:10px}.cancellation-content>.item[data-v-d91fc208] .van-field{border:1px solid #ddd;border-radius:4px}.cancellation-content>.item[data-v-d91fc208] .inputCom{padding-bottom:0}.cancellation-content>.item[data-v-d91fc208] .inputCom .label{font-size:14px}.cancellation-content>.item[data-v-d91fc208] .inputCom .iptbox{margin-top:10px;padding-left:16px;padding-right:16px;border-radius:4px}.cancellation-content>.item[data-v-d91fc208] .inputCom .iptbox input{font-size:14px;padding-left:0}.cancellation-content>.btn[data-v-d91fc208]{padding-top:20px}.cancellation-content>.btn[data-v-d91fc208] .van-button{border-radius:4px}.popup-title[data-v-d91fc208]{text-align:center;padding-top:15px}.popup-content[data-v-d91fc208]{padding:50px 30px 0}\n",document.head.appendChild(U),{setters:[e=>{t=e._,l=e.u,n=e.l,o=e.j,c=e.m,d=e.r,u=e.g,i=e.c,s=e.e,p=e.w,r=e.a,v=e.b,m=e.aW,f=e.t,x=e.T,g=e.cD,h=e.cE,b=e.b1,y=e.o,w=e.f,j=e.R,_=e.S},e=>{V=e.A},e=>{C=e.P,B=e.N},e=>{k=e.B},()=>{},e=>{T=e.F},e=>{z=e.E},e=>{E=e.D},()=>{}],execute:function(){const a=(e=>(j("data-v-d91fc208"),e=e(),_(),e))((()=>r("div",{style:{height:"46px"}},null,-1))),U={class:"cancellation-content"},$={class:"item"},D={class:"item"},I={class:"btn"},F={style:{height:"22rem"}};e("default",t({__name:"index",setup(e){const{t:t}=l(),j=n(),_=o(),P=c((()=>{let e={username:"***",safeword:0};return _.userInfo.token?e={...e,..._.userInfo}:j.push("/login"),e})),S=c((()=>{const e=P.value.username;if(P.value.username.indexOf("@")>-1)return e;if(P.value.phone){const e=P.value.phone.split(" ");return`(+${e[0]}) ${e[1]}`}return e})),A=d(!1),N=d(""),O=d(""),R=d(!1),W=async()=>{if(!N.value)return x(t("请输入您要注销账号的原因")),!1;R.value=!0;const e=await g();R.value=!1,e.money>0?x(t("该账号存在可用余额，不可注销！")):Boolean(P.value.safeword)?(A.value=!0,H.value=!0):q()},q=async()=>{R.value=!0,A.value=!1,H.value=!1,E.confirm({title:t("您确认要注销吗？"),message:t("警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。"),confirmButtonColor:"#ee0a24",cancelButtonText:t("cancel"),confirmButtonText:t("同意注销")}).then((()=>{G()})).catch((()=>{R.value=!1}))},G=()=>{const e={account:P.value.username,reason:N.value,cashPassword:O.value||null};h(e).then((()=>{R.value=!1,x.success(t("注销成功")),setTimeout((()=>{_.logout()}),1500)})).catch((()=>{O.value="",R.value=!1}))},H=d(!1);return u((()=>O.value),(e=>{6===e.length&&(x.loading(""),G(),A.value=!1,O.value="")})),(e,l)=>{const n=b,o=T,c=k,d=C,u=B,x=V;return y(),i("div",null,[s(n,{fixed:""},{title:p((()=>[w(f(v(t)("账号注销")),1)])),_:1}),a,r("div",U,[r("div",$,[s(z,{label:e.$t("您的账号"),modelValue:v(S),"onUpdate:modelValue":l[0]||(l[0]=e=>m(S)?S.value=e:null),disabled:!0,clearBtn:!1,typeText:"text"},null,8,["label","modelValue"])]),r("div",D,[r("p",null,f(v(t)("为什么要离开？")),1),s(o,{modelValue:N.value,"onUpdate:modelValue":l[1]||(l[1]=e=>N.value=e),rows:"4",autosize:"",type:"textarea",placeholder:v(t)("pleaseEnter")},null,8,["modelValue","placeholder"])]),r("div",I,[s(c,{type:"danger",loading:R.value,block:"",onClick:W},{default:p((()=>[w(f(e.$t("注销账号")),1)])),_:1},8,["loading"])])]),s(x,{show:A.value,"onUpdate:show":l[5]||(l[5]=e=>A.value=e),title:v(t)("请输入交易密码")},{default:p((()=>[r("div",F,[s(d,{length:6,value:O.value,focused:H.value,onFocus:l[2]||(l[2]=e=>H.value=!0)},null,8,["value","focused"]),s(u,{modelValue:O.value,"onUpdate:modelValue":l[3]||(l[3]=e=>O.value=e),show:H.value,onBlur:l[4]||(l[4]=e=>H.value=!1)},null,8,["modelValue","show"])])])),_:1},8,["show","title"])])}}},[["__scopeId","data-v-d91fc208"],["__file","D:/caishen/mall-app-h5-vue/mall-app-h5-vue/src/views/setting/cancellation/index.vue"]]))}}}));
