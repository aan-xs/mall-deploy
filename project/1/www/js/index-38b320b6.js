import{d as Le,_ as xe,u as ge,r as u,m as A,o as m,c as S,a as t,f as V,t as s,b as l,e as i,h as _e,c6 as we,F as ye,x as ke,w as p,n as ce,T as _,R as Ge,S as Me,I as Ze,j as je,l as He,i as Ke,q as Oe,g as Je,bq as Qe,y as k,z as C,al as Xe,b1 as Ye,aG as ae}from"./index-d71e1836.js";import{A as el}from"./index-ab1a8da6.js";import{P as ll,N as al}from"./index-47042e81.js";import{B as Ve}from"./index-2b37af5f.js";import{C as ol}from"./index-d3589253.js";import{P as tl}from"./index-bb63e648.js";import"./index-27d29771.js";import{F as Ce}from"./index-ac66dd73.js";import{E as nl,i as re}from"./index-7d8c9244.js";import{b as sl,e as ul,a as dl,c as il,d as rl}from"./exchange.api-38fa7c17.js";import{E as cl}from"./index-9bd62cf1.js";import{F as vl}from"./index-9cb38fbf.js";import{D as ml}from"./function-call-3e6c5181.js";import"./countryList-016fc82e.js";import"./use-id-7082c426.js";const pl=$=>(Ge("data-v-94360798"),$=$(),Me(),$),fl={class:"form-content"},hl={class:"title-content"},bl={class:"content"},_l={class:"item"},wl={class:"select-item"},yl=["value"],kl={class:"item"},xl={class:"select-item"},gl=["value"],Vl={class:"item"},Cl={class:"item tips"},Al=pl(()=>t("div",{class:"bg"},null,-1)),Tl=Le({name:"AddressBindDialog"}),Bl=Object.assign(Tl,{props:{modelValue:{type:Boolean,default:!1},chainData:{type:Array,default:()=>[]}},emits:["update:modelValue","bind-done"],setup($,{emit:g}){const W=$,{t:a}=ge(),I=()=>{g("update:modelValue",!1)},T=u("USDT"),B=A(()=>{if(W.chainData.length){const c=[...new Set(W.chainData.map(d=>d.coin).reverse())];if(c.length)return T.value=c[0],c.map(d=>({label:d,value:d}))}return[{label:"USDT",value:"USDT"}]}),w=u("TRC20"),D=A(()=>{if(W.chainData.length){const c=W.chainData.filter(d=>d.coin===T.value);if(c.length)return w.value=c[0].blockchain_name,c.map(d=>({label:d.blockchain_name,value:d.blockchain_name}))}return[{label:"TRC20",value:"TRC20"},{label:"ERC20",value:"ERC20"}]}),x=u(""),q=c=>/^[0-9A-Za-z]+$/.test(c),N=u(!1),j=()=>{if(!/^[0-9A-Za-z]+$/.test(x.value)){_(a("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"));return}N.value=!0;const d={coin:T.value,blockchain_name:w.value,channel_address:x.value};sl(d).then(()=>{g("bind-done",d)}).finally(()=>{N.value=!1})};return(c,d)=>{const P=Ze,H=Ce,E=Ve;return m(),S("div",{class:ce([{active:$.modelValue},"dialog-content"])},[t("div",fl,[t("div",hl,[V(s(l(a)("\u63D0\u6B3E\u5730\u5740\u7ED1\u5B9A"))+" ",1),i(P,{name:"cross",class:"close",onClick:I})]),t("div",bl,[t("div",_l,[t("p",null,s(l(a)("\u53D6\u6B3E\u65B9\u5F0F")),1),t("div",wl,[V(s(T.value)+" ",1),_e(t("select",{"onUpdate:modelValue":d[0]||(d[0]=y=>T.value=y)},[(m(!0),S(ye,null,ke(l(B),(y,z)=>(m(),S("option",{key:z,value:y.value},s(y.label),9,yl))),128))],512),[[we,T.value]])])]),t("div",kl,[t("p",null,s(l(a)("\u94FE\u63A5\u534F\u8BAE")),1),t("div",xl,[V(s(w.value)+" ",1),_e(t("select",{"onUpdate:modelValue":d[1]||(d[1]=y=>w.value=y)},[(m(!0),S(ye,null,ke(l(D),(y,z)=>(m(),S("option",{key:z,value:y.value},s(y.label),9,gl))),128))],512),[[we,w.value]])])]),t("div",Vl,[t("p",null,s(l(a)("\u6536\u6B3E\u94B1\u5305\u5730\u5740")),1),i(H,{clearable:"",modelValue:x.value,"onUpdate:modelValue":d[2]||(d[2]=y=>x.value=y),rules:[{validator:q,message:l(a)("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"),trigger:"onChange"}],class:"input-item"},null,8,["modelValue","rules"])]),t("div",Cl,s(l(a)("\u4EC5\u80FD\u7ED1\u5B9A\u4E00\u4E2A\u6536\u6B3E\u5730\u5740\uFF01")),1)]),i(E,{class:"w-full btn-content",type:"primary",loading:N.value,onClick:j},{default:p(()=>[V(s(l(a)("\u786E\u8BA4\u7ED1\u5B9A")),1)]),_:1},8,["loading"])]),Al],2)}}}),Ul=xe(Bl,[["__scopeId","data-v-94360798"],["__file","D:/caishen/mall-app-h5-vue/mall-app-h5-vue/src/views/withdraw/components/AddressBindDialog.vue"]]);const Sl={class:"icon-type-content"},Dl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Nl={key:0,class:"icon-type-content"},$l={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Wl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Il={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Fl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Rl={class:"mb-5 nationality-select"},ql={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Pl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},El={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},zl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Ll={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Gl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Ml={class:"mb-2.5 text-xs",style:{color:"#333"}},Zl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},jl={class:"mb-2.5 text-xs",style:{color:"#333"}},Hl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Kl={class:"mb-2.5 text-xs",style:{color:"#333"}},Ol={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Jl={class:"mb-2.5 text-xs",style:{color:"#333"}},Ql={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Xl={key:11,class:"current-balance"},Yl={key:12,class:"current-balance"},ea={class:"tips"},la={style:{height:"22rem"}},aa={__name:"index",setup($){const g=je(),W=He(),{t:a}=ge(),I="sm",T=Ke(),B=u(""),w=u(""),D=u(""),x=u(""),q=u("0.00"),N=u(!1),j=u(!1),c=o=>[null,void 0,""].includes(o),d=A(()=>["argos"].includes(I)),P=A(()=>["shop2u"].includes(I)),H=u(""),E=u(""),y=o=>{E.value=o.countryName},z=o=>/^[0-9A-Za-z]+$/.test(o),oe=()=>{ul({channel:v.value==="icon"?f.value:"bank"}).then(o=>{const{withdraw_fee:e}=o;q.value=(e*100).toFixed(2)})},F=u([]),Ae=async()=>{await dl().then(o=>{if(o.length){const e=[...new Set(o.map(r=>r.coin).reverse())];f.value=e[0]}else f.value="USDT";F.value=o||[]}).catch(()=>{_.clear()})},K=u(""),ve=A(()=>{var e,r;let o=[];return K.value?o=[{label:K.value,value:K.value}]:o=F.value.filter(b=>b.coin===f.value).map(b=>({...b,label:b.blockchain_name,value:b.blockchain_name})),o.length&&(B.value=(r=(e=o[0])==null?void 0:e.value)!=null?r:""),o!=null?o:[]}),O=u(!1),J=u(!1),L=u(!1),me=u(""),te=async()=>{var o;await il({session_token:(o=g==null?void 0:g.userInfo)==null?void 0:o.token}).then(e=>{O.value=Boolean(e.openWithdrawAddressBinding),J.value=Boolean(e.openWithdrawAddressBinding)&&(!e.chainName||!e.existWithdrawAddress),L.value=Boolean(e.openWithdrawAddressBinding)&&(!e.chainName||!e.existWithdrawAddress),me.value=e.session_token,Boolean(e.openWithdrawAddressBinding)&&(f.value=e.coinType,w.value=e.existWithdrawAddress,K.value=e.chainName)})},f=u(""),G=u(!1),Te=A(()=>{if(F.value.length){const o=[...new Set(F.value.map(e=>e.coin).reverse())];if(o.length)return o.map(e=>({text:e,value:e}))}return[{text:"USDT",value:"USDT"}]}),Be=()=>{O.value||(G.value=!0)},Ue=({value:o})=>{f.value=o,G.value=!1,oe()};Oe(async()=>{_.loading({duration:0,message:a("loading"),forbidClick:!0}),await Ae(),await te(),await oe(),_.clear()});const Se=A(()=>{const o=x.value,e=q.value,r=re.divide(re.minus(100,e),100),h=re.times(o,r),b=String(h);return b.includes(".")?b.split(".")[1].length===1?b+"0":b:b+".00"}),ne=u(2),R=A(()=>g.userInfo.money),pe=A(()=>{const o=R.value?Number(R.value):0,e=F.value.find(r=>r.coin===f.value&&r.blockchain_name===B.value);return e?(ne.value=f.value==="BTC"||f.value==="ETH"?6:2,Number(o/Number(e.fee))):0}),De=()=>{if(!L.value){const o=Number(ae(pe.value,ne.value).replace(/,/g,""));x.value=o}},fe=()=>{W.push({name:"WithdrawRecord"})},Ne=()=>{var o;if(v.value==="icon"){if(!/^[0-9A-Za-z]+$/.test(w.value)){_(a("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"));return}if(c(B.value)){_(a("blockchainNetworkRequire"));return}if(c(w.value)){_(a("withdrawalAddressRequire"));return}}if(v.value==="bank"){if(P.value&&c(E.value)){_(a("selectNation"));return}if(c(X.value)){_(a("\u8BF7\u8F93\u5165\u5F00\u6237\u884C\u540D\u79F0"));return}if(c(Y.value)){_(a("entryName"));return}if(c(ee.value)){_(a("\u8BF7\u8F93\u5165\u5361\u53F7"));return}}if(c(x.value)){_(a("withdrawalAmountRequire"));return}((o=g==null?void 0:g.userInfo)==null?void 0:o.safeword)===1?(N.value=!0,M.value=!0):ml.confirm({title:a("dialogTips"),message:a("shopSafeWord"),cancelButtonText:a("cancel"),confirmButtonText:a("gotoSet"),confirmButtonColor:"#1552F0",cancelButtonColor:"#999"}).then(()=>{Xe("/personalInfo")}).catch(()=>{console.log("cancel")})},$e=o=>{f.value=o.coin,B.value=o.blockchain_name,w.value=o.channel_address,L.value=!1,J.value=!1},We=async()=>{const o=ve.value.find(h=>h.blockchain_name===B.value),e=o?o.coin:"USDT",r={safeword:D.value,amount:x.value,from:w.value,channel:e,session_token:me.value};v.value==="bank"&&(r.channel="bank",r.bankName=X.value,r.bankUserName=Y.value,r.bankCardNo=ee.value,d.value&&(r.swiftCode=le.value||"",r.routingNum=le.value||"",r.accountAddress=ue.value||"",r.bankAddress=de.value||""),P.value&&(r.countryName=E.value||"")),j.value=!0,rl(r).then(async()=>{await g.getUserInfo(!0),_(a("withdrawalApplySuccess")),te(),setTimeout(()=>{fe()},1500)}).finally(()=>{j.value=!1,te()})},M=u(!0);Je(()=>D.value,o=>{o.length===6&&(_.loading({duration:0,forbidClick:!0}),We(),N.value=!1,D.value="")});const Ie=A(()=>{const o="sm";return!["tiktok-wholesale"].includes(o)});let Q="\u865A\u62DF\u5E01";["familyShop","sm"].includes(I)&&(Q="\u52A0\u5BC6\u8D27\u5E01"),["argos2"].includes(I)&&(Q="\u8D27\u5E01");const se=u(a(Q)),v=u("icon"),he=u([{text:a(Q),value:"icon"}]);Ie.value&&he.value.push({text:a("\u94F6\u884C\u5361"),value:"bank"});const Z=u(!1),X=u(""),Y=u(""),ee=u(""),be=u(""),le=u(""),ue=u(""),de=u(""),Fe=o=>{o.value==="bank"&&["familyShop","sm"].includes(I)?W.push({path:"/customerService"}):(se.value=o.text,v.value=o.value,Z.value=!1,x.value="",oe())};return(o,e)=>{const r=Ye,h=Ce,b=tl,ie=Qe,U=vl,Re=ol,qe=Ve,Pe=ll,Ee=al,ze=el;return m(),S("div",null,[i(r,null,{title:p(()=>[t("div",null,s(l(a)("withdrawal")),1)]),right:p(()=>[t("div",{onClick:fe},s(l(a)("withdrawalRecord")),1)]),_:1}),t("div",{class:ce(["withdraw",{"is-ar":l(T)}])},[t("div",Sl,[t("div",Dl,s(l(a)("\u53D6\u6B3E\u65B9\u5F0F")),1),i(h,{modelValue:se.value,"onUpdate:modelValue":e[0]||(e[0]=n=>se.value=n),readonly:"",name:"picker",onClick:e[1]||(e[1]=n=>Z.value=!0)},null,8,["modelValue"]),i(ie,{show:Z.value,"onUpdate:show":e[3]||(e[3]=n=>Z.value=n),position:"bottom"},{default:p(()=>[i(b,{columns:he.value,"cancel-button-text":l(a)("cancel"),"confirm-button-text":l(a)("confirm"),onConfirm:Fe,onCancel:e[2]||(e[2]=n=>Z.value=!1)},null,8,["columns","cancel-button-text","confirm-button-text"])]),_:1},8,["show"])]),v.value==="icon"?(m(),S("div",Nl,[t("div",$l,s(l(a)("\u9009\u62E9\u5E01\u79CD")),1),i(h,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=n=>f.value=n),readonly:"",name:"picker",onClick:Be},null,8,["modelValue"]),i(ie,{show:G.value,"onUpdate:show":e[6]||(e[6]=n=>G.value=n),position:"bottom"},{default:p(()=>[i(b,{columns:l(Te),"cancel-button-text":l(a)("cancel"),"confirm-button-text":l(a)("confirm"),onConfirm:Ue,onCancel:e[5]||(e[5]=n=>G.value=!1)},null,8,["columns","cancel-button-text","confirm-button-text"])]),_:1},8,["show"])])):k("v-if",!0),v.value==="icon"?(m(),C(nl,{key:1,list:l(ve),label:l(a)("blockchainNetwork"),disabled:O.value,modelValue:B.value,"onUpdate:modelValue":e[7]||(e[7]=n=>B.value=n)},null,8,["list","label","disabled","modelValue"])):k("v-if",!0),v.value==="icon"?(m(),C(U,{key:2},{default:p(()=>[t("div",Wl,s(l(a)("withdrawalAddress")),1),t("div",Il,[i(h,{clearable:"",modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=n=>w.value=n),disabled:O.value,placeholder:l(a)("withdrawalAddressTips"),rules:[{validator:z,message:l(a)("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"),trigger:"onChange"}]},null,8,["modelValue","disabled","placeholder","rules"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(P)?(m(),C(U,{key:3},{default:p(()=>[t("div",Fl,s(l(a)("\u56FD\u5BB6")),1),t("div",Rl,[i(Re,{modelValue:H.value,"onUpdate:modelValue":e[9]||(e[9]=n=>H.value=n),"get-name":"true",onDone:y},null,8,["modelValue"])])]),_:1})):k("v-if",!0),v.value==="bank"?(m(),C(U,{key:4},{default:p(()=>[t("div",ql,s(l(a)("\u5F00\u6237\u884C")),1),t("div",Pl,[i(h,{clearable:"",modelValue:X.value,"onUpdate:modelValue":e[10]||(e[10]=n=>X.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u5F00\u6237\u884C\u540D\u79F0")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"?(m(),C(U,{key:5},{default:p(()=>[t("div",El,s(l(a)("\u59D3\u540D")),1),t("div",zl,[i(h,{clearable:"",modelValue:Y.value,"onUpdate:modelValue":e[11]||(e[11]=n=>Y.value=n),placeholder:l(a)("entryName")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"?(m(),C(U,{key:6},{default:p(()=>[t("div",Ll,s(l(a)("\u5361\u53F7")),1),t("div",Gl,[i(h,{clearable:"",modelValue:ee.value,"onUpdate:modelValue":e[12]||(e[12]=n=>ee.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u5361\u53F7")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(U,{key:7},{default:p(()=>[t("div",Ml,s(l(a)("\u56FD\u9645\u4EE3\u7801")),1),t("div",Zl,[i(h,{clearable:"",modelValue:be.value,"onUpdate:modelValue":e[13]||(e[13]=n=>be.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u56FD\u9645\u4EE3\u7801")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(U,{key:8},{default:p(()=>[t("div",jl,s(l(a)("\u8DEF\u7531\u53F7\u7801")),1),t("div",Hl,[i(h,{clearable:"",modelValue:le.value,"onUpdate:modelValue":e[14]||(e[14]=n=>le.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u8DEF\u7531\u53F7\u7801")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(U,{key:9},{default:p(()=>[t("div",Kl,s(l(a)("\u8D26\u6237\u5730\u5740")),1),t("div",Ol,[i(h,{clearable:"",modelValue:ue.value,"onUpdate:modelValue":e[15]||(e[15]=n=>ue.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u8D26\u6237\u5730\u5740")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(U,{key:10},{default:p(()=>[t("div",Jl,s(l(a)("\u94F6\u884C\u5730\u5740")),1),t("div",Ql,[i(h,{clearable:"",modelValue:de.value,"onUpdate:modelValue":e[16]||(e[16]=n=>de.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u94F6\u884C\u5730\u5740")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),i(cl,{label:l(a)("withdrawalAmount"),placeholderText:l(a)("withdrawalAmountTips"),modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=n=>x.value=n),maxLength:16,disabled:L.value,required:"",typeText:"number"},{rightBtn:p(()=>[t("div",{class:ce(["withdraw-all",{"is-ar":l(T)}]),onClick:De,style:{"min-width":"40px"}},s(l(a)("total")),3)]),_:1},8,["label","placeholderText","modelValue","disabled"]),(l(R)||l(R)===0)&&f.value&&v.value==="icon"?(m(),S("div",Xl,[V(s(l(a)("\u5F53\u524D\u4F59\u989D"))+": ",1),t("span",null,s(l(ae)(l(R))),1),V("USDT \u2248 "),t("span",null,s(l(ae)(l(pe),ne.value)),1),V(s(f.value),1)])):k("v-if",!0),v.value!=="icon"?(m(),S("div",Yl,[V(s(l(a)("\u5F53\u524D\u4F59\u989D"))+": ",1),t("span",null,s(l(ae)(l(R))),1),V("USD ")])):k("v-if",!0),t("div",ea,[t("span",null,[V(s(l(a)("realWithdrawalAccount"))+": "+s(l(Se)),1),t("span",null,s(v.value==="icon"?` ${f.value}`:" USD"),1)]),t("span",null,s(l(a)("withdrawalFee"))+": "+s(q.value)+"%",1)]),i(qe,{class:"w-full btn-content",type:"primary",disabled:L.value,onClick:Ne},{default:p(()=>[V(s(l(a)("submit")),1)]),_:1},8,["disabled"]),i(ze,{show:N.value,"onUpdate:show":e[21]||(e[21]=n=>N.value=n),title:l(a)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:p(()=>[t("div",la,[i(Pe,{length:6,value:D.value,focused:M.value,onFocus:e[18]||(e[18]=n=>M.value=!0)},null,8,["value","focused"]),i(Ee,{modelValue:D.value,"onUpdate:modelValue":e[19]||(e[19]=n=>D.value=n),show:M.value,onBlur:e[20]||(e[20]=n=>M.value=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])],2),i(Ul,{modelValue:J.value,"onUpdate:modelValue":e[22]||(e[22]=n=>J.value=n),"chain-data":F.value,onBindDone:$e},null,8,["modelValue","chain-data"])])}}},_a=xe(aa,[["__scopeId","data-v-1a4fc61c"],["__file","D:/caishen/mall-app-h5-vue/mall-app-h5-vue/src/views/withdraw/index.vue"]]);export{_a as default};
