import{aV as q,aE as le,b9 as _e,ba as Pe,aN as Ae,aO as ze,aS as se,D as L,d as D,r as I,aC as re,p as ce,m as C,bb as de,E as ue,bc as Ne,g as _,ad as fe,e as g,K as P,J as ve,a6 as N,aP as be,aU as E,P as X,Z as F,a0 as J,bd as Oe,be as j,q as Ee,aa as Y,aj as Le,aI as De,aJ as He,s as z,au as Ve,aM as Ze,a9 as ne,bf as Me,a2 as We,bg as ae,ag as Fe,aZ as Ue,bh as je,bi as Ke,H as qe,$ as Je,a7 as Xe,aQ as Ye,ab as Qe,h as Ge,aT as pe}from"./index-761f4b55.js";import{u as he}from"./use-id-3e94b561.js";import{T as et}from"./index-a404e45c.js";import{a as tt,S as nt}from"./index-cf20c9cd.js";import{u as at}from"./use-refs-d4ef37ae.js";function it(e,o,l){let d=0;const n=e.scrollLeft,a=l===0?1:Math.round(l*1e3/16);function s(){e.scrollLeft+=(o-n)/a,++d<a&&q(s)}s()}function ot(e,o,l,d){let n=le(e);const a=n<o,s=l===0?1:Math.round(l*1e3/16),h=(o-n)/s;function r(){n+=h,(a&&n>o||!a&&n<o)&&(n=o),_e(e,n),a&&n<o||!a&&n>o?q(r):d&&q(d)}r()}function lt(e,o){if(!Pe||!window.IntersectionObserver)return;const l=new IntersectionObserver(a=>{o(a[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&l.observe(e.value)},n=()=>{e.value&&l.unobserve(e.value)};Ae(n),ze(n),se(d)}const[st,rt]=L("sticky"),ct={zIndex:P,position:ve("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var dt=D({name:st,props:ct,emits:["scroll","change"],setup(e,{emit:o,slots:l}){const d=I(),n=re(d),a=ce({fixed:!1,width:0,height:0,transform:0}),s=C(()=>de(e.position==="top"?e.offsetTop:e.offsetBottom)),h=C(()=>{const{fixed:f,height:T,width:y}=a;if(f)return{width:`${y}px`,height:`${T}px`}}),r=C(()=>{if(!a.fixed)return;const f=ue(Ne(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${s.value}px`});return a.transform&&(f.transform=`translate3d(0, ${a.transform}px, 0)`),f}),k=f=>o("scroll",{scrollTop:f,isFixed:a.fixed}),b=()=>{if(!d.value||be(d))return;const{container:f,position:T}=e,y=E(d),R=le(window);if(a.width=y.width,a.height=y.height,T==="top")if(f){const S=E(f),u=S.bottom-s.value-a.height;a.fixed=s.value>y.top&&S.bottom>0,a.transform=u<0?u:0}else a.fixed=s.value>y.top;else{const{clientHeight:S}=document.documentElement;if(f){const u=E(f),O=S-u.top-s.value-a.height;a.fixed=S-s.value<y.bottom&&S>u.top,a.transform=O<0?-O:0}else a.fixed=S-s.value<y.bottom}k(R)};return _(()=>a.fixed,f=>o("change",f)),fe("scroll",b,{target:n,passive:!0}),lt(d,b),()=>{var f;return g("div",{ref:d,style:h.value},[g("div",{class:rt({fixed:a.fixed}),style:r.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const ut=X(dt),[ft,ie]=L("tab");var vt=D({name:ft,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:P,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:F},setup(e,{slots:o}){const l=C(()=>{const n={},{type:a,color:s,disabled:h,isActive:r,activeColor:k,inactiveColor:b}=e;s&&a==="card"&&(n.borderColor=s,h||(r?n.backgroundColor=s:n.color=s));const T=r?k:b;return T&&(n.color=T),n}),d=()=>{const n=g("span",{class:ie("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||J(e.badge)&&e.badge!==""?g(Oe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>g("div",{id:e.id,role:"tab",class:[ie([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[bt,oe]=L("tabs");var ht=D({name:bt,props:{count:j(Number),inited:Boolean,animated:Boolean,duration:j(P),swipeable:Boolean,lazyRender:Boolean,currentIndex:j(Number)},emits:["change"],setup(e,{emit:o,slots:l}){const d=I(),n=h=>o("change",h),a=()=>{var h;const r=(h=l.default)==null?void 0:h.call(l);return e.animated||e.swipeable?g(tt,{ref:d,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[r]}):r},s=h=>{const r=d.value;r&&r.state.active!==h&&r.swipeTo(h,{immediate:!e.inited})};return _(()=>e.currentIndex,s),Ee(()=>{s(e.currentIndex)}),Y({swipeRef:d}),()=>g("div",{class:oe("content",{animated:e.animated||e.swipeable})},[a()])}});const[ge,W]=L("tabs"),gt={type:ve("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:F,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:F,lineWidth:P,lineHeight:P,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},me=Symbol(ge);var mt=D({name:ge,props:gt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:l}){var d,n;{const t=(n=(d=Le())==null?void 0:d.vnode)==null?void 0:n.props;t&&"onClick"in t&&console.warn('[Vant] Tabs: "click" event is deprecated, using "click-tab" instead.'),t&&"onDisabled"in t&&console.warn('[Vant] Tabs: "disabled" event is deprecated, using "click-tab" instead.')}let a,s,h;const r=I(),k=I(),b=I(),f=I(),T=he(),y=re(r),[R,S]=at(),{children:u,linkChildren:O}=De(me),v=ce({inited:!1,position:"",lineStyle:{},currentIndex:-1}),A=C(()=>u.length>e.swipeThreshold||!e.ellipsis||e.shrink),ye=C(()=>({borderColor:e.color,background:e.background})),H=(t,i)=>{var c;return(c=t.name)!=null?c:i},Q=C(()=>{const t=u[v.currentIndex];if(t)return H(t,v.currentIndex)}),U=C(()=>de(e.offsetTop)),G=C(()=>e.sticky?U.value+a:0),V=t=>{const i=k.value,c=R.value;if(!A.value||!i||!c||!c[v.currentIndex])return;const m=c[v.currentIndex].$el,w=m.offsetLeft-(i.offsetWidth-m.offsetWidth)/2;it(i,w,t?0:+e.duration)},$=()=>{const t=v.inited;z(()=>{const i=R.value;if(!i||!i[v.currentIndex]||e.type!=="line"||be(r.value))return;const c=i[v.currentIndex].$el,{lineWidth:m,lineHeight:w}=e,x=c.offsetLeft+c.offsetWidth/2,B={width:ne(m),backgroundColor:e.color,transform:`translateX(${x}px) translateX(-50%)`};if(t&&(B.transitionDuration=`${e.duration}s`),J(w)){const te=ne(w);B.height=te,B.borderRadius=te}v.lineStyle=B})},we=t=>{const i=t<v.currentIndex?-1:1;for(;t>=0&&t<u.length;){if(!u[t].disabled)return t;t+=i}},Z=(t,i)=>{const c=we(t);if(!J(c))return;const m=u[c],w=H(m,c),x=v.currentIndex!==null;v.currentIndex!==c&&(v.currentIndex=c,i||V(),$()),w!==e.active&&(o("update:active",w),x&&o("change",w,m.title)),h&&!e.scrollspy&&We(Math.ceil(ae(r.value)-U.value))},M=(t,i)=>{const c=u.find((w,x)=>H(w,x)===t),m=c?u.indexOf(c):0;Z(m,i)},p=(t=!1)=>{if(e.scrollspy){const i=u[v.currentIndex].$el;if(i&&y.value){const c=ae(i,y.value)-G.value;s=!0,ot(y.value,c,t?0:+e.duration,()=>{s=!1})}}},xe=(t,i,c)=>{const{title:m,disabled:w}=u[i],x=H(u[i],i);w?o("disabled",x,m):(je(e.beforeChange,{args:[x],done:()=>{Z(i),p()}}),o("click",x,m),Ke(t)),o("click-tab",{name:x,title:m,event:c,disabled:w})},Te=t=>{h=t.isFixed,o("scroll",t)},Se=t=>{z(()=>{M(t),p(!0)})},ke=()=>{for(let t=0;t<u.length;t++){const{top:i}=E(u[t].$el);if(i>G.value)return t===0?0:t-1}return u.length-1},Ce=()=>{if(e.scrollspy&&!s){const t=ke();Z(t)}},Ie=()=>u.map((t,i)=>g(vt,Fe({key:t.id,id:`${T}-${i}`,ref:S(i),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:i===v.currentIndex,controls:t.id,scrollable:A.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:c=>xe(t,i,c)},Ue(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Re=()=>{if(e.type==="line"&&u.length)return g("div",{class:W("line"),style:v.lineStyle},null)},ee=()=>{var t,i,c;const{type:m,border:w,sticky:x}=e,B=[g("div",{ref:x?void 0:b,class:[W("wrap"),{[Me]:m==="line"&&w}]},[g("div",{ref:k,role:"tablist",class:W("nav",[m,{shrink:e.shrink,complete:A.value}]),style:ye.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Ie(),Re(),(i=l["nav-right"])==null?void 0:i.call(l)])]),(c=l["nav-bottom"])==null?void 0:c.call(l)];return x?g("div",{ref:b},[B]):B};_([()=>e.color,He],$),_(()=>e.active,t=>{t!==Q.value&&M(t)}),_(()=>u.length,()=>{v.inited&&(M(e.active),$(),z(()=>{V(!0)}))});const $e=()=>{M(e.active,!0),z(()=>{v.inited=!0,b.value&&(a=E(b.value).height),V(!0)})},Be=(t,i)=>o("rendered",t,i);return Y({resize:()=>{$(),z(()=>{var t,i;return(i=(t=f.value)==null?void 0:t.swipeRef.value)==null?void 0:i.resize()})},scrollTo:Se}),Ve($),Ze($),se($e),fe("scroll",Ce,{target:y,passive:!0}),O({id:T,props:e,setLine:$,onRendered:Be,currentName:Q,scrollIntoView:V}),()=>g("div",{ref:r,class:W([e.type])},[e.sticky?g(ut,{container:r.value,offsetTop:U.value,onScroll:Te},{default:()=>[ee()]}):ee(),g(ht,{ref:f,count:u.length,inited:v.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:v.currentIndex,onChange:Z},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const[yt,K]=L("tab"),wt=ue({},qe,{dot:Boolean,name:P,badge:P,title:String,disabled:Boolean,titleClass:Je,titleStyle:[String,Object],showZeroBadge:F});var xt=D({name:yt,props:wt,setup(e,{slots:o}){const l=he(),d=I(!1),{parent:n,index:a}=Xe(me);if(!n){console.error("[Vant] <Tab> must be a child component of <Tabs>.");return}const s=()=>{var b;return(b=e.name)!=null?b:a.value},h=()=>{d.value=!0,n.props.lazyRender&&z(()=>{n.onRendered(s(),e.title)})},r=C(()=>{const b=s()===n.currentName.value;return b&&!d.value&&h(),b}),k=I(!r.value);return _(r,b=>{b?k.value=!1:Ye(()=>{k.value=!0})}),_(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),Qe(et,r),()=>{var b;const f=`${n.id}-${a.value}`,{animated:T,swipeable:y,scrollspy:R,lazyRender:S}=n.props;if(!o.default&&!T)return;const u=R||r.value;if(T||y)return g(nt,{id:l,role:"tabpanel",class:K("panel-wrapper",{inactive:k.value}),tabindex:r.value?0:-1,"aria-hidden":!r.value,"aria-labelledby":f},{default:()=>{var A;return[g("div",{class:K("panel")},[(A=o.default)==null?void 0:A.call(o)])]}});const v=d.value||R||!S?(b=o.default)==null?void 0:b.call(o):null;return Y({id:l}),Ge(g("div",{id:l,role:"tabpanel",class:K("panel"),tabindex:u?0:-1,"aria-labelledby":f},[v]),[[pe,u]])}}});const $t=X(xt),Bt=X(mt);export{$t as T,Bt as a};
