System.register(["./index-legacy-8819b039.js","./index-legacy-fc5fd1e9.js","./index-legacy-1c6949da.js"],(function(e,a){"use strict";var o,i,n,l,r,t,d,s,p,c,u,v,m,f,g,b,w,x,k,h,y,z,_,j,S,F,A,C,R=document.createElement("style");return R.textContent=":root{--van-uploader-size: 80px;--van-uploader-icon-size: 24px;--van-uploader-icon-color: var(--van-gray-4);--van-uploader-text-color: var(--van-text-color-2);--van-uploader-text-font-size: var(--van-font-size-sm);--van-uploader-upload-background-color: var(--van-gray-1);--van-uploader-upload-active-color: var(--van-active-color);--van-uploader-delete-color: var(--van-white);--van-uploader-delete-icon-size: 14px;--van-uploader-delete-background-color: rgba(0, 0, 0, .7);--van-uploader-file-background-color: var(--van-background-color);--van-uploader-file-icon-size: 20px;--van-uploader-file-icon-color: var(--van-gray-7);--van-uploader-file-name-padding: 0 var(--van-padding-base);--van-uploader-file-name-margin-top: var(--van-padding-xs);--van-uploader-file-name-font-size: var(--van-font-size-sm);--van-uploader-file-name-text-color: var(--van-gray-7);--van-uploader-mask-text-color: var(--van-white);--van-uploader-mask-background-color: rgba(50, 50, 51, .88);--van-uploader-mask-icon-size: 22px;--van-uploader-mask-message-font-size: var(--van-font-size-sm);--van-uploader-mask-message-line-height: var(--van-line-height-xs);--van-uploader-loading-icon-size: 22px;--van-uploader-loading-icon-color: var(--van-white);--van-uploader-disabled-opacity: var(--van-disabled-opacity) }.van-uploader{position:relative;display:inline-block}.van-uploader__wrapper{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.van-uploader__wrapper--disabled{opacity:var(--van-uploader-disabled-opacity)}.van-uploader__input{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;cursor:pointer;opacity:0}.van-uploader__input-wrapper{position:relative}.van-uploader__input:disabled{cursor:not-allowed}.van-uploader__upload{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;box-sizing:border-box;width:var(--van-uploader-size);height:var(--van-uploader-size);margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;background:var(--van-uploader-upload-background-color)}.van-uploader__upload:active{background-color:var(--van-uploader-upload-active-color)}.van-uploader__upload--readonly:active{background-color:var(--van-uploader-upload-background-color)}.van-uploader__upload-icon{color:var(--van-uploader-icon-color);font-size:var(--van-uploader-icon-size)}.van-uploader__upload-text{margin-top:var(--van-padding-xs);color:var(--van-uploader-text-color);font-size:var(--van-uploader-text-font-size)}.van-uploader__preview{position:relative;margin:0 var(--van-padding-xs) var(--van-padding-xs) 0;cursor:pointer}.van-uploader__preview-image{display:block;width:var(--van-uploader-size);height:var(--van-uploader-size);overflow:hidden}.van-uploader__preview-delete{position:absolute;top:0;right:0}.van-uploader__preview-delete--shadow{width:var(--van-uploader-delete-icon-size);height:var(--van-uploader-delete-icon-size);background:var(--van-uploader-delete-background-color);border-radius:0 0 0 12px}.van-uploader__preview-delete-icon{position:absolute;top:0;right:0;color:var(--van-uploader-delete-color);font-size:var(--van-uploader-delete-icon-size);-webkit-transform:scale(.7) translate(10%,-10%);transform:scale(.7) translate(10%,-10%)}.van-uploader__preview-cover{position:absolute;top:0;right:0;bottom:0;left:0}.van-uploader__mask{position:absolute;top:0;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:var(--van-uploader-mask-text-color);background:var(--van-uploader-mask-background-color)}.van-uploader__mask-icon{font-size:var(--van-uploader-mask-icon-size)}.van-uploader__mask-message{margin-top:6px;padding:0 var(--van-padding-base);font-size:var(--van-uploader-mask-message-font-size);line-height:var(--van-uploader-mask-message-line-height)}.van-uploader__loading{width:var(--van-uploader-loading-icon-size);height:var(--van-uploader-loading-icon-size);color:var(--van-uploader-loading-icon-color)}.van-uploader__file{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:var(--van-uploader-size);height:var(--van-uploader-size);background:var(--van-uploader-file-background-color)}.van-uploader__file-icon{color:var(--van-uploader-file-icon-color);font-size:var(--van-uploader-file-icon-size)}.van-uploader__file-name{box-sizing:border-box;width:100%;margin-top:var(--van-uploader-file-name-margin-top);padding:var(--van-uploader-file-name-padding);color:var(--van-uploader-file-name-text-color);font-size:var(--van-uploader-file-name-font-size);text-align:center}\n",document.head.appendChild(R),{setters:[e=>{o=e.D,i=e.ae,n=e.a5,l=e.d,r=e.K,t=e.be,d=e.e,s=e.I,p=e.O,c=e.aF,u=e.a0,v=e.bh,m=e.E,f=e.a6,g=e.J,b=e.Z,w=e.bo,x=e.r,k=e.aO,h=e.aa,y=e.bK,z=e.a4,_=e.aZ,j=e.ag,S=e.p,F=e.P},e=>{A=e.I},e=>{C=e.I}],execute:function(){const[a,R,V]=o("uploader");function I(e,a){return new Promise((o=>{if("file"===a)return void o();const i=new FileReader;i.onload=e=>{o(e.target.result)},"dataUrl"===a?i.readAsDataURL(e):"text"===a&&i.readAsText(e)}))}function O(e,a){return i(e).some((e=>!!e.file&&(n(a)?a(e.file):e.file.size>a)))}const L=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function U(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?(a=e.url,L.test(a)):"string"==typeof e.content&&0===e.content.indexOf("data:image"));var a}var B=l({props:{name:r,item:t(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview"],setup(e,{emit:a,slots:o}){const i=()=>{const{status:a,message:o}=e.item;if("uploading"===a||"failed"===a){const e="failed"===a?d(s,{name:"close",class:R("mask-icon")},null):d(p,{class:R("loading")},null),i=u(o)&&""!==o;return d("div",{class:R("mask")},[e,i&&d("div",{class:R("mask-message")},[o])])}},n=o=>{const{name:i,item:n,index:l,beforeDelete:r}=e;o.stopPropagation(),v(r,{args:[n,{name:i,index:l}],done:()=>a("delete")})},l=()=>a("preview"),r=()=>{if(e.deletable&&"uploading"!==e.item.status){const e=o["preview-delete"];return d("div",{role:"button",class:R("preview-delete",{shadow:!e}),tabindex:0,"aria-label":V("delete"),onClick:n},[e?e():d(s,{name:"cross",class:R("preview-delete-icon")},null)])}},t=()=>{if(o["preview-cover"]){const{index:a,item:i}=e;return d("div",{class:R("preview-cover")},[o["preview-cover"](m({index:a},i))])}},f=()=>{const{item:a,lazyLoad:o,imageFit:i,previewSize:n}=e;return U(a)?d(C,{fit:i,src:a.content||a.url,class:R("preview-image"),width:Array.isArray(n)?n[0]:n,height:Array.isArray(n)?n[1]:n,lazyLoad:o,onClick:l},{default:t}):d("div",{class:R("file"),style:c(e.previewSize)},[d(s,{class:R("file-icon"),name:"description"},null),d("div",{class:[R("file-name"),"van-ellipsis"]},[a.file?a.file.name:a.url]),t()])};return()=>d("div",{class:R("preview")},[f(),i(),r()])}});const D={name:f(""),accept:g("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:f(1/0),imageFit:g("cover"),resultType:g("dataUrl"),uploadIcon:g("photograph"),uploadText:String,deletable:b,afterRead:Function,showUpload:b,modelValue:w(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:b,previewOptions:Object,previewFullImage:b,maxSize:{type:[Number,String,Function],default:1/0}};var P=l({name:a,props:D,emits:["delete","oversize","click-upload","close-preview","click-preview","update:modelValue"],setup(e,{emit:a,slots:o}){const n=x(),l=[],r=(a=e.modelValue.length)=>({name:e.name,index:a}),t=()=>{n.value&&(n.value.value="")},p=o=>{if(t(),O(o,e.maxSize)){if(!Array.isArray(o))return void a("oversize",o,r());{const i=function(e,a){const o=[],i=[];return e.forEach((e=>{O(e,a)?i.push(e):o.push(e)})),{valid:o,invalid:i}}(o,e.maxSize);if(o=i.valid,a("oversize",i.invalid,r()),!o.length)return}}o=S(o),a("update:modelValue",[...e.modelValue,...i(o)]),e.afterRead&&e.afterRead(o,r())},u=a=>{const{maxCount:o,modelValue:i,resultType:n}=e;if(Array.isArray(a)){const e=+o-i.length;a.length>e&&(a=a.slice(0,e)),Promise.all(a.map((e=>I(e,n)))).then((e=>{const o=a.map(((a,o)=>{const i={file:a,status:"",message:""};return e[o]&&(i.content=e[o]),i}));p(o)}))}else I(a,n).then((e=>{const o={file:a,status:"",message:""};e&&(o.content=e),p(o)}))},v=a=>{const{files:o}=a.target;if(e.disabled||!o||!o.length)return;const i=1===o.length?o[0]:[].slice.call(o);if(e.beforeRead){const a=e.beforeRead(i,r());if(!a)return void t();if(z(a))return void a.then((e=>{u(e||i)})).catch(t)}u(i)};let f;const g=()=>a("close-preview"),b=(i,n)=>{const t=["imageFit","deletable","previewSize","beforeDelete"],s=m(_(e,t),_(i,t,!0));return d(B,j({item:i,index:n,onClick:()=>a("click-preview",i,r(n)),onDelete:()=>((o,i)=>{const n=e.modelValue.slice(0);n.splice(i,1),a("update:modelValue",n),a("delete",o,r(i))})(i,n),onPreview:()=>(a=>{if(e.previewFullImage){const o=e.modelValue.filter(U),i=o.map((e=>(e.file&&!e.url&&"failed"!==e.status&&(e.url=URL.createObjectURL(e.file),l.push(e.url)),e.url))).filter(Boolean);f=A(m({images:i,startPosition:o.indexOf(a),onClose:g},e.previewOptions))}})(i)},_(e,["name","lazyLoad"]),s),_(o,["preview-cover","preview-delete"]))},w=()=>{if(e.previewImage)return e.modelValue.map(b)},F=e=>a("click-upload",e),C=()=>{if(e.modelValue.length>=e.maxCount||!e.showUpload)return;const a=e.readonly?null:d("input",{ref:n,type:"file",class:R("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:v},null);return o.default?d("div",{class:R("input-wrapper"),onClick:F},[o.default(),a]):d("div",{class:R("upload",{readonly:e.readonly}),style:c(e.previewSize),onClick:F},[d(s,{name:e.uploadIcon,class:R("upload-icon")},null),e.uploadText&&d("span",{class:R("upload-text")},[e.uploadText]),a])};return k((()=>{l.forEach((e=>URL.revokeObjectURL(e)))})),h({chooseFile:()=>{n.value&&!e.disabled&&n.value.click()},closeImagePreview:()=>{f&&f.close()}}),y((()=>e.modelValue)),()=>d("div",{class:R()},[d("div",{class:R("wrapper",{disabled:e.disabled})},[w(),C()])])}});e("U",F(P))}}}));
