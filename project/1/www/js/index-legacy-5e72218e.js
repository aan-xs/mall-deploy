System.register(["./index-legacy-8819b039.js","./index-legacy-f3b88fd3.js","./index-legacy-cd6dd746.js","./index-legacy-98b6c633.js","./login.api-legacy-93f92010.js","./nationalityList-legacy-fdfa6796.js","./index-legacy-d081e0d6.js","./index-legacy-1c6949da.js","./index-legacy-25e51213.js","./index-legacy-2841566b.js","./use-id-legacy-3f97160d.js","./index-legacy-bb888b66.js","./index-legacy-9e965803.js","./countryList-legacy-94cb363f.js"],(function(e,a){"use strict";var l,t,i,o,u,n,d,s,r,v,c,p,g,x,y,b,h,m,f,A,w,k,C,V,j,E,B,S,$,T,U,z,I,F,_,q,R,D=document.createElement("style");return D.textContent=".bindVerify[data-v-59a3607d]{width:100%;min-height:100vh;box-sizing:border-box}.content[data-v-59a3607d]{font-size:12px;padding:0 16px}.iptbox[data-v-59a3607d]{height:44px;margin-top:8px;padding:0 10px 0 20px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:3px}.iptbox input[data-v-59a3607d]{-webkit-box-flex:1;-webkit-flex:1 1;flex:1 1;height:100%;border:none}.iptbox input[data-v-59a3607d]::-webkit-input-placeholder{color:#868c9a}.iptbox span[data-v-59a3607d]{color:#1d91ff}.imgbox[data-v-59a3607d]{border:1px solid #E5E7ED;padding:5px;width:182px;height:182px;box-sizing:border-box}.imgbox img[data-v-59a3607d]{width:100%;height:100%}.code[data-v-59a3607d]{font-size:15px;font-weight:300;line-height:18px;margin-top:22px;height:18px}.code img[data-v-59a3607d]{width:14px;height:14px;margin-left:5px}.tips[data-v-59a3607d]{margin-top:10px;color:#999}.copy[data-v-59a3607d]{border-radius:4px;width:132px;height:40px;margin-top:16px;border:1px solid #E5E7ED;line-height:40px}.bottom[data-v-59a3607d]{padding:20px 16px 7px}.bottom p[data-v-59a3607d]{padding-bottom:13px}.van-password-input[data-v-59a3607d]{margin:0}.van-password-input__security li[data-v-59a3607d],[data-v-59a3607d] .van-password-input__security li{background:#F5F5F5;width:50px;height:50px;color:#333}[data-v-59a3607d] .van-button--primary{background-color:var(--site-main-color);border-color:var(--site-main-color);border-radius:4px}[data-v-59a3607d] .inputBackground{background-color:#fff!important;border-radius:4px;border:1px solid #eee}\n",document.head.appendChild(D),{setters:[e=>{l=e._,t=e.ai,i=e.l,o=e.u,u=e.r,n=e.j,d=e.q,s=e.ct,r=e.g,v=e.O,c=e.c,p=e.e,g=e.w,x=e.a,y=e.y,b=e.t,h=e.h,m=e.v,f=e.f,A=e.F,w=e.b,k=e.T,C=e.cu,V=e.cv,j=e.cw,E=e.b1,B=e.o,S=e.R,$=e.S},e=>{T=e.B},e=>{U=e.P,z=e.N},e=>{I=e.E},e=>{F=e.a},e=>{_=e.n},e=>{q=e.u},e=>{R=e.I},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a={class:"bindVerify h-full bg-white"},D={class:"content"},H={key:0},N={style:{"margin-top":"22px"}},O={class:"label mt-2 textColor"},P={class:"iptbox inputBackground"},Z=["placeholder"],J={style:{"margin-top":"22px"}},X={key:1},Y={class:"pl-30 pr-30 text-center flex flex-col items-center justify-center mt40"},G={class:"imgbox"},K={class:"code flex items-center justify-center textColor"},M={class:"tips"},W={class:"flex justify-between mt-6 mb-3"},Q={class:"flex items-center"},L=(e=>(S("data-v-59a3607d"),e=e(),$(),e))((()=>x("div",{class:"mt-2"},null,-1))),ee={class:"mt-5 bottom tabBackground textColor"};e("default",l({__name:"index",setup(e){const l=t(),S=i(),{t:$}=o(),{toClipboard:ae}=q(),le=u(""),te=u(""),ie=u(""),oe=u(!1),ue=u(0),ne=u(""),de=u(""),se=u(""),re=u(!1),ve=u("");u(!0);const ce=u(""),pe=u(0),ge=u(null),xe=u(0),ye=u(""),be=n(),he=u(!1);d((()=>{console.log("ss"),me(),clearInterval(ge.value),ge.value=null}));const me=()=>{ue.value=l.query.type,ne.value=l.query.verifyCode||"",1==ue.value?(le.value=$("bindPhone"),oe.value=!0):2==ue.value?le.value=$("bindEmail"):3==ue.value&&(le.value=$("googleAuthenticatorEn"),Ve())},fe=async()=>{if(2!=ue.value||""!=te.value)if(2!=ue.value||/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(te.value))if(1!=ue.value||""!=te.value)if(1!=ue.value||/^[0-9]+$/.test(te.value)){if(xe.value>0)return!1;k.loading({mask:!0}),await C({target:1==ue.value?`${pe.value} ${te.value}`:te.value}),F({target:1==ue.value?`${pe.value} ${te.value}`:te.value}).then((e=>{k($("sendSuccess")),xe.value=30,ge.value=setInterval((()=>{xe.value>0?xe.value=xe.value-1:(xe.value=0,clearInterval(ge.value),ge.value=null)}),1e3)})).catch((()=>{k.clear()}))}else k($("请输入正确的手机号码"));else k($("entryPhone"));else k($("请输入正确的邮箱地址"));else k($("entryEmail"))},Ae=()=>{2!=ue.value||""!=te.value?1!=ue.value||""!=te.value?""!=ie.value?(he.value=!0,1==ue.value?Ce():2==ue.value?ke():3==ue.value&&je()):k($("请输入登录密码")):k($("entryPhone")):k($("entryEmail"))},we=async()=>{await be.getUserInfo(!0),k($("bindSuccess")),he.value=!1,setTimeout((()=>{l.query.reset?S.go(-2):S.back()}),1e3)},ke=()=>{V({target:te.value,email:te.value,verifcode:de.value,password:ie.value,verifyCode:ne.value}).then((e=>{we()})).catch((e=>{console.log(e),he.value=!1}))},Ce=()=>{V({target:`${pe.value} ${te.value}`,phone:`${pe.value} ${te.value}`,verifcode:de.value,password:ie.value,verifyCode:ne.value}).then((e=>{we()})).catch((e=>{console.log(e),he.value=!1}))},Ve=()=>{s({}).then((e=>{se.value=e.google_auth_secret,ce.value=e.google_auth_url,console.log(e)}))},je=()=>{j({secret:se.value,code:ve.value}).then((e=>{e.google_auth_bind?we():k(err||$("bindFailed"))}))},Ee=async()=>{try{await ae(se.value),k($("copySuccess"))}catch(e){console.error(e)}},Be=async()=>{ve.value=await navigator.clipboard.readText()},Se=(e,a,l)=>{ye.value=a,pe.value=l},$e=u(null),Te=()=>{$e.value.open()};return r(ve,((e,a)=>{6===ve.value.length&&(re.value=!1)})),(e,l)=>{const t=E,i=v,o=U,u=z,n=T;return B(),c("div",a,[p(t,null,{title:g((()=>[f(b(le.value),1)])),_:1}),x("div",D,[y(" 手机邮箱验证 "),1==ue.value||2==ue.value?(B(),c("div",H,[x("div",N,[p(I,{label:2==ue.value?e.$t("email"):e.$t("phoneNum"),placeholderText:2==ue.value?e.$t("entryEmail"):e.$t("entryPhone"),modelValue:te.value,"onUpdate:modelValue":l[0]||(l[0]=e=>te.value=e),area:oe.value,onSelectArea:Te,dialCode:pe.value,icon:ye.value},null,8,["label","placeholderText","modelValue","area","dialCode","icon"])]),x("p",O,b(e.$t("verificationCode")),1),x("div",P,[h(x("input",{class:"inputBackground textColor",type:"text",placeholder:e.$t("entryVerifyCode"),"onUpdate:modelValue":l[1]||(l[1]=e=>de.value=e)},null,8,Z),[[m,de.value]]),3!=ue.value?(B(),c("span",{key:0,onClick:fe},[f(b(e.$t("sendVerifyCode")),1),xe.value?(B(),c(A,{key:0},[f(" ("+b(xe.value)+")s",1)],64)):y("v-if",!0)])):y("v-if",!0)]),x("div",J,[p(I,{label:e.$t("登录密码"),placeholderText:e.$t("请输入登录密码"),modelValue:ie.value,"onUpdate:modelValue":l[2]||(l[2]=e=>ie.value=e),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])])])):y("v-if",!0),y(" 谷歌验证 "),3==ue.value?(B(),c("div",X,[x("div",Y,[x("div",G,[p(w(R),{src:ce.value},{loading:g((()=>[p(i,{type:"spinner",size:"20"})])),_:1},8,["src"])]),x("div",K,[f(b(se.value)+" ",1),x("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKzSURBVHgBvVZdbtpAEP5214G+VOUI9ATlBqEnKDlB4CVV1JeitJHSKIqjCJCaEsRDFYVUIj1BuEHICUJPUN+gPDY23unuEsjaQLDz00+yZHt29tud2Z35GFKi9vV7AYIXGHiOJHLg0pMS3t7nzX4Sf5Zk0OHRSdHhYp2AkvrM3TO0F8qwvYi80ep07yVsNE7ylHW6ICoiDQgDPwjX3J1NzyZTESnzRT714x/rlBHXC8iG6vFun1kwFDIZ8bvePP1ok41Nc9Bone2TJDdOov61QaPe7vaHgW0weWVOiXOmw563bcTYgBEV7tYSw+G305Jg7CLiRGgHYsV1q5UhlqB2dOoyzvYX2SOEOmfIiEt7lRSisru9cY4UqDVPygyiO88WzWFG7EdCIqmalsxMysXqItt0h+ZEqkRbhvOdrY0KUsI+IHMXM3khh5dsww0PD/DEZBFCVT3eTV717tzq3R16KrIooXXfJHCFFEhKpuGMHVT+pPU3DAZIgZu/JvyJUmAIRyPkhXVeiWf/IAXsErYMhsZxkNjhsTCEN3gRqSBEwWs8Ewzhbcka3v3kRTwTHOu9j3G/AxNsFU+EerNzobuHmZfQnx6VkOjndBShqJsuHglTm/UmSJVL9ejrNiXc+/S+Byusgouu2+rm8BioRmB9eQFf6UWKNyGsWp/5jPS7eCDqrbNWrBG09VmZ6Yf1486lDqm1jJ7vy2rSu+a63Vz2VdCKVR7vy9aGOfkzEsNnK2ssIh1YScmFy1qzU15GpvOefRlcx8l8Hr6dzjbPUZc6yGgjnjgrhz6BfoVSmvLHOfIMzhsViTJmFZ0hsxvBQtVm6mvIXTC2joeAWN8Xo0q86yzVpVoucMSUwP3w1NiD3a35SiGRENbQ+eFMlJRAeoOxCpuEb6h2o0joSlLYS6rA/xv+AZfLLFBKDLSAAAAAAElFTkSuQmCC",alt:"",onClick:Ve})]),x("p",M,b(e.$t("saveKeyTips")),1),x("div",{class:"copy textColor",onClick:Ee},b(e.$t("copy")),1)]),x("div",W,[x("div",null,b(e.$t("googleVerificationCode")),1),x("div",Q,[x("div",{class:"colorMain",onClick:l[3]||(l[3]=e=>ve.value="")},b(e.$t("clear")),1),x("div",{class:"colorMain ml-30",onClick:Be},b(e.$t("paste")),1)])]),p(o,{value:ve.value,gutter:16,focused:re.value,onFocus:l[4]||(l[4]=e=>re.value=!0),mask:!1},null,8,["value","focused"]),p(u,{modelValue:ve.value,"onUpdate:modelValue":l[5]||(l[5]=e=>ve.value=e),show:re.value,onBlur:l[6]||(l[6]=e=>re.value=!1)},null,8,["modelValue","show"]),L,x("div",ee,[x("p",null,b(e.$t("precautions")),1),x("p",null,b(e.$t("precautionsTips1")),1),x("p",null,b(e.$t("precautionsTips2")),1)])])):y("v-if",!0),p(n,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:he.value,onClick:Ae},{default:g((()=>[f(b(e.$t("confirm")),1)])),_:1},8,["loading"])]),p(_,{ref_key:"controlChildRef",ref:$e,title:e.$t("selectArea"),onGetName:Se},null,8,["title"])])}}},[["__scopeId","data-v-59a3607d"],["__file","D:/Users/zq/zq/mall-app-h5-vue/mall-app-h5-vue/src/views/bindVerify/index.vue"]]))}}}));
