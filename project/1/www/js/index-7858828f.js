import{_ as T,d as W,i as H,u as K,ai as Q,l as X,r as o,m as Y,au as Z,q as ee,I as se,c as r,a as s,e as p,w as I,b as i,aW as te,t as a,f as M,n as oe,o as c,av as ae,F as ne,x as le,y as u,V as ie,aG as S,R as de,S as re}from"./index-d71e1836.js";import{P as ce}from"./index-e1abf70a.js";import{L as ue}from"./index-bc764d2b.js";import"./index-27d29771.js";import"./index-ac66dd73.js";import{S as me}from"./index-b1a171b4.js";import{_ as pe}from"./search-icon-8ae5f679.js";import{_ as ve}from"./more-f6d49895.js";import{s as _e,m as fe}from"./product.api-4494d699.js";import"./use-id-7082c426.js";import"./index-43614c31.js";import"./stringify-da9bcf3c.js";import"./___vite-browser-external_commonjs-proxy-74327c81.js";const k=v=>(de("data-v-690b902b"),v=v(),re(),v),he={class:"product"},ge=k(()=>s("img",{class:"search-icon",src:pe},null,-1)),ye={class:"flex ml-4 mr-4 product-header"},xe={key:0,class:"moeny icon"},Pe=["src"],Ie={key:1,class:"moeny"},Se={class:"title"},ke={class:"moeny"},Ne={class:"title"},$e={class:"hot-title ml-4 mr-4 mt-4 mb-4"},be=["onClick"],Ce={class:"flex-1 flex left"},Le={class:"product-img-wrap w-20 h-20"},we=["src"],Ve={key:0,class:"take_off"},Me={class:"product-info flex-1"},Re={class:"name-content"},Ge=["onClick"],De=k(()=>s("img",{class:"more-icon",src:ve},null,-1)),Ee=[De],Ue={class:"Specification"},qe={style:{"margin-left":"20px"}},Be={class:"money-content"},Fe={key:0,class:"dis"},Oe=k(()=>s("div",{class:"safe-area-inset-bottom"},null,-1)),ze=W({name:"ProductIndex"}),Ae=Object.assign(ze,{setup(v){const R=H();K(),Q();const m=X();let _=o("");o(!1);let f=o(1),N=o(0),$=o(0),y=o(0),G=o({});const d=o([]),x=o(!1),h=o(!1),P=o(!1),D="sm",E=Y(()=>["int"].includes(D)),b=o(!0);Z(()=>{if(!b.value){sessionStorage.getItem("productReload")&&(sessionStorage.removeItem("productReload"),g(!0));const e=sessionStorage.getItem("currentProductId");if(e){const l=d.value.findIndex(n=>n.id===e);sessionStorage.getItem("productDelete")?(d.value.splice(l,1),y.value-=1,sessionStorage.removeItem("productDelete")):(d.value=[],g(!0)),sessionStorage.removeItem("currentProductId")}}});const g=e=>{e&&(f.value=1,P.value=!1);let l={pageNum:f.value,pageSize:20};fe(l).then(n=>{b.value=!1,h.value&&(h.value=!1),N.value=n.evaluations,$.value=n.systemGoodsNum,y.value=n.sellerGoodsNum,e?d.value=n.pageList||[]:d.value=f.value===1?n.pageList:[...d.value,...n.pageList],d.value.length>=n.sellerGoodsNum?P.value=!0:f.value++,x.value=!1})},C=()=>{g(!0)},U=()=>{m.push("/search?id=1")},q=()=>{m.push("/productPage/list")},B=()=>{m.push("/productPage/comment")},F=e=>{m.push({path:"/productPage/details",query:{item:JSON.stringify(e)}})},L=o(""),w=o("");_e().then(e=>{L.value=e.sysParaMin,w.value=e.sysParaMax});const O=e=>{e.sysParaMin=L.value,e.sysParaMax=w.value,m.push({path:"/productPage/productEdit",query:{item:JSON.stringify(e)}}),G.value=e};return ee(()=>{document.addEventListener("langChange",()=>{C()})}),(e,l)=>{const n=me,V=se,z=ue,A=ce;return c(),r("div",he,[s("div",{onClick:U},[p(n,{class:"search-wrap",disabled:"",modelValue:i(_),"onUpdate:modelValue":l[0]||(l[0]=t=>te(_)?_.value=t:_=t),placeholder:e.$t("\u8BF7\u8F93\u5165\u641C\u7D22\u5546\u54C1\u540D\u79F0"),clearable:""},{"left-icon":I(t=>[ge]),_:1},8,["modelValue","placeholder"])]),s("div",ye,[s("div",{class:"flex-1 text-center after",onClick:q},[i(E)?(c(),r("div",xe,[s("img",{src:i(ae)("image/order/diamond.svg"),alt:""},null,8,Pe)])):(c(),r("div",Ie,a(i($)),1)),s("div",Se,[M(a(e.$t("\u5546\u54C1\u5E93")),1),p(V,{name:"arrow"})])]),s("div",{class:"flex-1 text-center",onClick:B},[s("div",ke,a(i(N)),1),s("div",Ne,[M(a(e.$t("\u8BC4\u8BBA")),1),p(V,{name:"arrow"})])])]),s("div",$e,a(e.$t("\u5E97\u94FA\u4EA7\u54C1"))+"("+a(i(y))+") ",1),s("div",{class:oe(["list ml-4 mr-4 mt-4 mb-4 list-content",{"is-ar":i(R)}])},[p(A,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=t=>h.value=t),onRefresh:C,"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":e.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":e.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0")},{default:I(()=>[p(z,{ref:"vanList",loading:x.value,"onUpdate:loading":l[1]||(l[1]=t=>x.value=t),"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),finished:P.value,"finished-text":e.$t("noMore"),onLoad:g},{default:I(()=>[(c(!0),r(ne,null,le(d.value,(t,J)=>(c(),r("div",{class:"item pl-3 pr-3 pb-3 pt-3 flex",onClick:j=>F(t),key:J},[s("div",Ce,[s("div",Le,[s("img",{class:"product-img",src:t.imgUrl1},null,8,we),t.isShelf/1===0?(c(),r("div",Ve,a(e.$t("\u5DF2\u4E0B\u67B6")),1)):u("v-if",!0),u('                <div class="delete-wrap" @click.stop="deleteGood(item)">'),u("                  {{ $t('\u5220\u9664') }}"),u("                </div>")]),s("div",Me,[s("div",Re,[s("p",null,a(t.name),1),s("div",{class:"more",onClick:ie(j=>O(t),["stop"])},Ee,8,Ge)]),u(' <div class="name">{{ item.name }}</div> '),s("div",Ue,[s("span",null,a(t.categoryName),1),s("span",qe,a(e.$t("\u9500\u91CF"))+": "+a(i(S)(t.soldNum,0)),1)]),s("div",Be,[s("p",null,"$"+a(i(S)(t.sellingPrice)),1),t.discountPrice?(c(),r("p",Fe,a(e.$t("\u6298\u6263\u4EF7"))+" $"+a(i(S)(t.discountPrice)),1)):u("v-if",!0)])])]),u(` <div>
              <img
                class="more-icon"
                @click.stop="openEdit(item)"
                src="@/assets/imgs/product/more.png"
              />
            </div> `)],8,be))),128))]),_:1},8,["loading","loading-text","finished","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"]),Oe],2)])}}}),os=T(Ae,[["__scopeId","data-v-690b902b"],["__file","D:/caishen/mall-app-h5-vue/mall-app-h5-vue/src/views/product/index.vue"]]);export{os as default};
