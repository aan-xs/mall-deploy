import{_ as B,d as k,u as P,r as h,p as L,i as N,T as p,B as j,I as Q,a$ as H,aw as z,c as v,e as r,w as S,a as t,t as b,n as C,y as Z,b0 as J,b1 as M,o as I,f as U,R as W,S as D}from"./index-a2850886.js";import{B as K}from"./index-03c7d4c5.js";import"./index-49d61071.js";import{F as Y}from"./index-937c8bb4.js";import{S as E,a as u}from"./index-2da2c0e1.js";import{u as T}from"./upload.api-59080034.js";import"./use-id-e2fa0a8e.js";const q=k({name:"ShopBasicInfo",components:{VuePictureCropper:E},setup(){const{t:e}=P(),o=h({}),R=h(localStorage.getItem("sellerId")||""),d=L({name:"",contact:"",shopPhone:"",shopAddress:"",shopRemark:"",imInitMessage:""}),V=new URL("data:image/png;base64,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",self.location),F=N();p.loading({duration:0,message:e("loading"),forbidClick:!0}),j().then(a=>{o.value=a,d.name=a.name,d.contact=a.contact,d.shopPhone=a.shopPhone,d.shopAddress=a.shopAddress,d.shopRemark=a.shopRemark,d.imInitMessage=a.imInitMessage,p.clear()}).catch(()=>{p.clear()});const m=h(!1),w=async()=>{const a={...d};if(!l.file&&!o.value.avatar){p(`${e("\u8BF7\u8BBE\u7F6E")}${e("storeLogo")}`);return}if(!a.name){p(`${e("\u8BF7\u8BBE\u7F6E")}${e("storeName")}`);return}if(a.shopPhone&&!/^\d{3,}$/.test(a.shopPhone))return p(e("\u7535\u8BDD\u683C\u5F0F\u6709\u8BEF")),!1;m.value=!0;let i="";if(l.file)try{i=await T({file:l.file,moduleName:"shopAvatar"})}catch(c){return console.log(c),m.value=!1,!1}i&&(a.avatar=i),m.value=!0,J(a).then(()=>{m.value=!1,document.dispatchEvent(new CustomEvent("headerRefresh")),p.success(e("saveSuc"))}).catch(()=>{m.value=!1})},n=h(!1),f=h(null),g=h(""),l=L({dataURL:"",blobURL:"",file:""});function A(a){g.value="",l.dataURL="",l.blobURL="",l.file="";const{files:i}=a.target;if(!i||!i.length)return;const c=i[0],y=new FileReader;y.readAsDataURL(c),y.onload=()=>{g.value=String(y.result),n.value=!0,f.value&&(f.value.value="")}}async function s(){if(!u)return;const a=u.getDataURL(),i=await u.getBlob();if(!i)return;const c=await u.getFile();l.dataURL=a,l.blobURL=URL.createObjectURL(i),l.file=c,n.value=!1}return{isArLang:F,avatarDefault:V,storeInfo:o,storeForm:d,submitLoading:m,showBtn:R,t:e,submitHandle:w,uploadInput:f,pic:g,result:l,isShowModal:n,selectFile:A,getResult:s,croperBack:()=>{!u||(u.clear(),u.reset(),n.value=!1)}}}}),G=e=>(W("data-v-3c35484c"),e=e(),D(),e),O=G(()=>t("div",{style:{height:"46px"}},null,-1)),X={class:"item avatar"},x={class:"info"},$=["src"],_=["src"],ee={class:"item"},oe={class:"item"},ae={class:"item"},te={class:"item"},se={class:"item"},le={key:0,class:"croper-content-modal"},ne={class:"submit-btn"};function re(e,o,R,d,V,F){var A;const m=M,w=Q,n=Y,f=H,g=z("VuePictureCropper"),l=K;return I(),v("div",null,[r(m,{fixed:!0},{title:S(()=>[U(b(e.t("basicInfo")),1)]),_:1}),O,t("div",{class:C(["form-content",{"is-ar":e.isArLang}])},[t("div",X,[t("p",null,b(e.t("storeLogo")),1),t("div",x,[t("div",{class:C(["avatar-img",{"is-ar":e.isArLang}])},[t("input",{ref:"uploadInput",type:"file",accept:"image/jpg, image/jpeg, image/png, image/gif",onChange:o[0]||(o[0]=(...s)=>e.selectFile&&e.selectFile(...s))},null,544),e.result.dataURL?(I(),v("img",{key:0,src:e.result.dataURL,alt:""},null,8,$)):(I(),v("img",{key:1,src:((A=e.storeInfo)==null?void 0:A.avatar)||e.avatarDefault.href,alt:""},null,8,_))],2),r(w,{name:"arrow",color:"#999",size:"12"})])]),t("div",ee,[r(n,{modelValue:e.storeForm.name,"onUpdate:modelValue":o[1]||(o[1]=s=>e.storeForm.name=s),type:"text",label:e.t("storeName"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storeName")},null,8,["modelValue","label","placeholder"])]),t("div",oe,[r(n,{modelValue:e.storeForm.contact,"onUpdate:modelValue":o[2]||(o[2]=s=>e.storeForm.contact=s),type:"text",label:e.t("contactPerson"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("contactPerson")},null,8,["modelValue","label","placeholder"])]),t("div",ae,[r(n,{modelValue:e.storeForm.shopPhone,"onUpdate:modelValue":o[3]||(o[3]=s=>e.storeForm.shopPhone=s),type:"number",label:e.t("storePhone"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storePhone")},null,8,["modelValue","label","placeholder"])]),t("div",te,[r(n,{modelValue:e.storeForm.shopAddress,"onUpdate:modelValue":o[4]||(o[4]=s=>e.storeForm.shopAddress=s),type:"text",label:e.t("storeAddress"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storeAddress")},null,8,["modelValue","label","placeholder"])])],2),t("div",{class:C(["remark-content",{"is-ar":e.isArLang}])},[t("p",null,b(e.t("storeProfile")),1),r(n,{modelValue:e.storeForm.shopRemark,"onUpdate:modelValue":o[5]||(o[5]=s=>e.storeForm.shopRemark=s),rows:"4",autosize:"",type:"textarea","label-width":0,label:"",placeholder:e.t("pleaseEnter")+e.t("storeProfile")},null,8,["modelValue","placeholder"])],2),t("div",{class:C(["form-content",{"is-ar":e.isArLang}])},[t("div",se,[r(n,{modelValue:e.storeForm.imInitMessage,"onUpdate:modelValue":o[6]||(o[6]=s=>e.storeForm.imInitMessage=s),type:"text",label:e.t("\u8FDB\u5E97\u6B22\u8FCE\u8BED"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("\u8FDB\u5E97\u6B22\u8FCE\u8BED")},null,8,["modelValue","label","placeholder"])])],2),e.isShowModal?(I(),v("div",le,[r(f,{title:e.t("selectPhotos"),"right-text":e.t("sure"),"left-arrow":"",fixed:"",onClickLeft:e.croperBack,onClickRight:e.getResult},null,8,["title","right-text","onClickLeft","onClickRight"]),r(g,{boxStyle:{width:"100%",height:"100%",backgroundColor:"#f8f8f8",margin:"auto"},img:e.pic,options:{viewMode:1,dragMode:"crop",aspectRatio:1}},null,8,["img"])])):Z("v-if",!0),t("div",ne,[r(l,{loading:e.submitLoading,type:"primary",size:"large",disabled:!e.showBtn,onClick:e.submitHandle},{default:S(()=>[U(b(e.showBtn?e.t("save"):e.t("\u5546\u5BB6\u5165\u9A7B\u5C1A\u672A\u5B8C\u6210")),1)]),_:1},8,["loading","disabled","onClick"])])])}const ge=B(q,[["render",re],["__scopeId","data-v-3c35484c"],["__file","D:/Users/zq/zq/mall-app-h5-vue/mall-app-h5-vue/src/views/shop/basicInfo/index.vue"]]);export{ge as default};
