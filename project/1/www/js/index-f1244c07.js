import{_ as P,ai as I,l as U,u as q,r as n,j as A,q as E,c as R,e as r,w as y,a as v,b as _,T as c,cS as z,b1 as D,o as L,f as x,t as T}from"./index-761f4b55.js";import{B as j}from"./index-ca5f5a51.js";import{E as V}from"./index-0740788c.js";import{n as G}from"./nationalityList-a18298b2.js";import{c as f}from"./countryList-016fc82e.js";import"./index-72339518.js";import"./index-b282ead9.js";import"./use-id-3e94b561.js";import"./index-cbf282ba.js";import"./index-29257fb1.js";const H={class:"bindVerify h-full bg-white"},M={class:"content"},O={style:{"margin-top":"22px"}},F={style:{"margin-top":"22px"}},J={__name:"index",setup(K){const w=I(),h=U(),{t:o}=q(),a=n(""),u=n(""),s=n(0),d=n(""),p=A(),i=n(!1),b=n("\u4FEE\u6539\u624B\u673A\u53F7\u7801");E(()=>{const e=p.userInfo.phone;if(e&&!p.phoneverif){const t=e.split(" ");b.value="bindPhone",s.value=Number(t[0]),a.value=t[1];for(const l in f)f[l].dialCode===Number(t[0])&&(d.value=f[l].code)}});const S=()=>{if(a.value==""){c(o("entryPhone"));return}if(!/^[0-9]+$/.test(a.value)){c(o("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"));return}if(u.value==""){c(o("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"));return}i.value=!0,C()},$=async()=>{await p.getUserInfo(!0),c(o("bindSuccess")),i.value=!1,setTimeout(()=>{w.query.reset?h.go(-2):h.back()},1e3)},C=()=>{z({target:`${s.value} ${a.value}`,phone:`${s.value} ${a.value}`,password:u.value}).then(e=>{$()}).catch(e=>{console.log(e),i.value=!1})},N=(e,t,l)=>{console.log(t),d.value=t,s.value=l},g=n(null),k=()=>{g.value.open()};return(e,t)=>{const l=D,B=j;return L(),R("div",H,[r(l,null,{title:y(()=>[x(T(_(o)(b.value)),1)]),_:1}),v("div",M,[v("div",O,[r(V,{label:_(o)("phoneNum"),placeholderText:_(o)("entryPhone"),modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=m=>a.value=m),area:!0,onSelectArea:k,dialCode:s.value,icon:d.value},null,8,["label","placeholderText","modelValue","dialCode","icon"])]),v("div",F,[r(V,{label:e.$t("\u767B\u5F55\u5BC6\u7801"),placeholderText:e.$t("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"),modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=m=>u.value=m),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])]),r(B,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:i.value,onClick:S},{default:y(()=>[x(T(e.$t("confirm")),1)]),_:1},8,["loading"])]),r(G,{ref_key:"controlChildRef",ref:g,title:e.$t("selectArea"),onGetName:N},null,8,["title"])])}}},le=P(J,[["__scopeId","data-v-403e7485"],["__file","D:/Users/zq/zq/mall-app-h5-vue/mall-app-h5-vue/src/views/changePhone/index.vue"]]);export{le as default};
