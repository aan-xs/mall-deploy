import{_ as R,i as V,u as E,c5 as T,T as U,I as P,bq as j,aw as q,c as h,e as u,w as d,a as i,t as p,z as c,n as B,o as n,F as m,x as v,f as w,y as S,R as z,S as D}from"./index-a2850886.js";import{E as J}from"./index-00da0b3a.js";import{P as A}from"./index-8fc155db.js";import{L as F}from"./index-ec0d0903.js";import"./index-49d61071.js";import"./index-937c8bb4.js";import{S as M}from"./index-a8f9759a.js";import{T as G,a as H}from"./index-22c1123e.js";/* empty css              */import{o as K,a as Q}from"./orderItem-c0b2d1b5.js";import"./stringify-4b0a72d6.js";import"./use-id-e2fa0a8e.js";import"./index-72e1753d.js";import"./use-refs-04c93d9f.js";import"./config-22c2c72a.js";import"./index-b18c89e2.js";import"./___vite-browser-external_commonjs-proxy-349ceac5.js";const W=V(),X={name:"Order",beforeRouteEnter(e,s,r){console.log("beforeRouteEnter"),r(l=>{const t=JSON.parse(window.sessionStorage.getItem("position"));document.querySelector(".main-list").scrollTop=t})},beforeRouteLeave(e,s,r){const l=document.querySelector(".main-list").scrollTop;window.sessionStorage.setItem("position",JSON.stringify(l)),r()},components:{orderItem:K},data(){return{loading:!1,refreshing:!1,finished:!1,showCenter:!1,showCenter2:!1,t:E().t,activeName:"",payStatus:"-1",showSeach:!1,list:[],option1:[],option2:[],title1:"",title2:"",orderId:"",purchStatus:"",status:"-2",pageNum:1,isArLang:W}},activated(){},created(){const e="tiktokMall";window.sessionStorage.setItem("position",JSON.stringify(0)),this.title1="\u652F\u4ED8\u72B6\u6001",this.title2="\u7269\u6D41\u72B6\u6001",this.option1=[{text:"\u5168\u90E8",value:-1,isCurrent:!0},{text:"\u672A\u652F\u4ED8",value:0,isCurrent:!1},{text:"\u5DF2\u652F\u4ED8",value:1,isCurrent:!1}],this.option2=[{text:"\u5168\u90E8",value:-2,isCurrent:!0},{text:"\u8BA2\u5355\u5DF2\u53D6\u6D88",value:-1,isCurrent:!1},{text:"\u7B49\u5F85\u4E70\u5BB6\u4ED8\u6B3E",value:0,isCurrent:!1},{text:"\u4E70\u5BB6\u5DF2\u4ED8\u6B3E",value:1,isCurrent:!1},{text:"\u4F9B\u5E94\u5546\u5DF2\u63A5\u5355",value:2,isCurrent:!1},{text:"\u7269\u6D41\u8FD0\u8F93\u4E2D",value:3,isCurrent:!1},{text:"\u4E70\u5BB6\u5DF2\u7B7E\u6536",value:4,isCurrent:!1},{text:"\u8BA2\u5355\u5DF2\u5B8C\u6210",value:5,isCurrent:!1},{text:"\u5DF2\u9000\u6B3E",value:6,isCurrent:!1}],["argos"].includes(e)&&this.option2.forEach(s=>{s.value===4&&(s.text="\u8BA2\u5355\u5DF2\u5B8C\u6210"),s.value===5&&(s.text="\u4E70\u5BB6\u5DF2\u7B7E\u6536")}),this.onRefresh(),document.addEventListener("reloadOrderList",()=>{this.onRefresh()},!1)},computed:{hasNoPushNum:()=>{const e=T();return Boolean(e.num)}},methods:{onLoad(){},onRefresh(){this.init(),this.getOrderList()},handleChoose(e){let s=this.payStatus/1,r=this.option1.findIndex(t=>t.value===s);this.option1.splice(r,1,{...this.option1[r],isCurrent:!1});let l=this.option1.findIndex(t=>t.value===e.value);this.option1.splice(l,1,{...this.option1[l],isCurrent:!0}),this.payStatus=e.value,this.title1=e.text,this.showCenter=!1,this.init(),this.getOrderList()},handleChoose2(e){let s=this.status/1,r=this.option2.findIndex(t=>t.value===s);this.option2.splice(r,1,{...this.option2[r],isCurrent:!1});let l=this.option2.findIndex(t=>t.value===e.value);this.option2.splice(l,1,{...this.option2[l],isCurrent:!0}),this.status=e.value,this.title2=e.text,this.showCenter2=!1,this.init(),this.getOrderList()},handleShow(e){e===1?this.showCenter=!0:this.showCenter2=!0},init(){this.pageNum=1,this.list=[],this.loading=!1,this.refreshing=!1,this.finished=!1},getOrderList(){const e={orderId:this.orderId,payStatus:this.payStatus,purchStatus:this.activeName,status:this.status,begin:"",end:"",pageNum:this.pageNum};console.log(e.end),console.log(e),Object.keys(e).forEach(s=>{!e[s]&&e[s]!==0&&delete e[s]}),e.payStatus/1===-1&&delete e.payStatus,e.status/1===-2&&delete e.status,console.log("data",e),U.loading({message:this.t("\u52A0\u8F7D\u4E2D"),forbidClick:!0,duration:0}),console.log("\u8BF7\u6C42\u53C2\u6570",e),Q(e).then(s=>{this.refreshing&&(this.refreshing=!1),this.pageNum++,this.loading=!1,s.pageList.length==0&&(this.finished=!0),this.list=this.list.concat(s.pageList)}).catch(s=>{console.log(s)})},tab(e,s){this.activeName=e,console.log(this.activeName,"activeName"),this.onRefresh()},onSearch(){this.showSeach=!0,this.$router.push("/order_search")},change(e){this.value=e,this.showSeach=!1},onConfirm2(e){this.title2=this.option2[e].text,this.getOrderList()}}},g=e=>(z("data-v-69fb50eb"),e=e(),D(),e),Y={class:"main"},Z={class:"seach",style:{"border-radius":"25px"}},$={class:"dropdown"},ee={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},te={class:"text-xs"},se=g(()=>i("div",{class:"triangle"},null,-1)),oe={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},ie={class:"text-xs"},ne=g(()=>i("div",{class:"triangle"},null,-1)),re=["onClick"],le=["onClick"],ae={class:"main-list"},ue={class:"goods"},he=g(()=>i("div",{class:"safe-area-inset-bottom"},null,-1));function de(e,s,r,l,t,a){const f=G,y=H,b=M,_=P,x=j,I=q("orderItem"),N=F,k=A,L=J;return n(),h("div",{id:"order",class:B({"is-ar":t.isArLang})},[u(y,{active:t.activeName,"onUpdate:active":s[0]||(s[0]=o=>t.activeName=o),onClick:a.tab},{default:d(()=>[u(f,{title:t.t("total"),name:""},null,8,["title"]),u(f,{title:t.t("\u5F85\u91C7\u8D2D"),name:"0",dot:a.hasNoPushNum},null,8,["title","dot"]),u(f,{title:t.t("\u5DF2\u91C7\u8D2D"),name:"1"},null,8,["title"])]),_:1},8,["active","onClick"]),i("div",Y,[i("div",Z,[u(b,{style:{"border-radius":"25px"},readonly:"",onClick:a.onSearch,modelValue:t.orderId,"onUpdate:modelValue":s[1]||(s[1]=o=>t.orderId=o),placeholder:t.t("\u641C\u7D22")},null,8,["onClick","modelValue","placeholder"])]),i("div",$,[i("div",{class:"dropdownitem one h-10.5",onClick:s[2]||(s[2]=o=>a.handleShow(1))},[i("div",ee,[i("span",te,p(t.t(t.title1)),1),se])]),i("div",{class:"dropdownitem one h-10.5",onClick:s[3]||(s[3]=o=>a.handleShow(2))},[i("div",oe,[i("span",ie,p(t.t(t.title2)),1),ne])])]),u(x,{show:t.showCenter,"onUpdate:show":s[4]||(s[4]=o=>t.showCenter=o),round:""},{default:d(()=>[(n(!0),h(m,null,v(t.option1,(o,C)=>(n(),h("div",{onClick:O=>a.handleChoose(o),class:"font-3.5 w-72 h-12 flex justify-center items-center border-bottom relative"},[w(p(t.t(o.text))+" ",1),o.isCurrent?(n(),c(_,{key:0,name:"success",class:"yes"})):S("v-if",!0)],8,re))),256))]),_:1},8,["show"]),u(x,{show:t.showCenter2,"onUpdate:show":s[5]||(s[5]=o=>t.showCenter2=o),round:""},{default:d(()=>[(n(!0),h(m,null,v(t.option2,(o,C)=>(n(),h("div",{onClick:O=>a.handleChoose2(o),class:"text-xs w-72 h-12 flex justify-center items-center border-bottom relative",key:C+"option2"},[w(p(t.t(o.text))+" ",1),o.isCurrent?(n(),c(_,{key:0,name:"success",class:"yes"})):S("v-if",!0)],8,le))),128))]),_:1},8,["show"]),i("div",ae,[t.list.length>0?(n(),c(k,{key:0,modelValue:t.refreshing,"onUpdate:modelValue":s[7]||(s[7]=o=>t.refreshing=o),onRefresh:a.onRefresh,"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":e.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":e.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0")},{default:d(()=>[u(N,{"immediate-check":!1,loading:t.loading,"onUpdate:loading":s[6]||(s[6]=o=>t.loading=o),"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),finished:t.finished,"finished-text":e.$t("noMore"),onLoad:a.getOrderList},{default:d(()=>[i("div",ue,[(n(!0),h(m,null,v(t.list,o=>(n(),c(I,{info:o},null,8,["info"]))),256))])]),_:1},8,["loading","loading-text","finished","finished-text","onLoad"])]),_:1},8,["modelValue","onRefresh","loading-text","loosing-text","pulling-text"])):(n(),c(L,{key:1,description:e.$t("noData")},null,8,["description"])),he])])],2)}const Oe=R(X,[["render",de],["__scopeId","data-v-69fb50eb"],["__file","D:/Users/zq/zq/mall-app-h5-vue/mall-app-h5-vue/src/views/order/index.vue"]]);export{Oe as default};
