import{_ as H,d as O,u as P,i as V,r as g,s as R,c as n,e as k,w as L,b1 as C,o as a,f as E,t as d,b as s,F as I,x as D,a as p,n as $,y as x,z as j,R as B,S as F,cO as J,cP as U,al as q,cQ as Q}from"./index-d71e1836.js";import{P as G}from"./index-e1abf70a.js";import{L as K}from"./index-bc764d2b.js";import{E as W}from"./index-3362e25b.js";import{m as r}from"./config-6f1990d6.js";import"./use-id-7082c426.js";const X=h=>(B("data-v-8d741b7f"),h=h(),F(),h),Y={class:"page-main-content"},Z=X(()=>p("div",{style:{height:"46px"}},null,-1)),ee={key:0,class:"list-content"},se=["onClick"],te={class:"title-content"},ae={class:"title"},ne={key:0,class:"txt"},oe=["innerHTML"],le=["innerHTML"],ie=["innerHTML"],re=["innerHTML"],ue=["innerHTML"],ce={key:0},de={key:1,class:"txt"},pe=O({name:"MessageSystem"}),_e=Object.assign(pe,{setup(h){const{t:i}=P(),N=V(),w=new URL("/www/png/name-20d65991.png",self.location),v=g([]),y=g(!1),_=g(!0),m=g(!1),f=g({pageSize:20,pageNum:1}),S=()=>{const t={...f.value,totalElements:-1,type:3,status:0,module:1};J(t).then(o=>{const c=o.elements||[];c.forEach(l=>{const u={};(l.varInfo?JSON.parse(l.varInfo):[]).forEach(e=>{u[e.code]=["complaintReason"].includes(e.code)?i(e.value):e.value}),l.timeStr=U(l.sendTime,!0),l.varObj=u}),v.value=f.value.pageNum===1?c:[...v.value,...c],_.value=!1,y.value=!1,(o.totalPage===f.value.pageNum||!o.totalPage)&&(m.value=!0),o.totalPage>f.value.pageNum&&(f.value.pageNum+=1)}).catch(()=>{m.value=!0,_.value=!1,y.value=!1})},z=()=>{m.value=!1,_.value=!0,f.value.pageNum=1,S()},M=t=>{q({path:"/message/details",query:{id:t.id}}),t.status!==2&&Q({ids:t.id}).then(()=>{t.status=2})},T=(t,o)=>{const l=(t.varInfo?JSON.parse(t.varInfo):[]).find(u=>u.code===o);return l?l.value:"0"},b=(t,o)=>{const l=(t.varInfo?JSON.parse(t.varInfo):[]).find(u=>u.code===o);return l?l.value:""};return R(()=>{document.addEventListener("systemListRefresh",()=>{z()},!1)}),(t,o)=>{const c=C,l=W,u=K,A=G;return a(),n("div",Y,[k(c,{fixed:!0},{title:L(()=>[E(d(t.$t("\u7CFB\u7EDF\u6D88\u606F")),1)]),_:1}),Z,k(A,{modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=e=>y.value=e),"loading-text":t.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":t.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":t.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0"),onRefresh:z},{default:L(()=>[k(u,{loading:_.value,"onUpdate:loading":o[0]||(o[0]=e=>_.value=e),finished:m.value,"loading-text":s(i)("loading"),"finished-text":s(i)("product.3"),onLoad:S},{default:L(()=>[v.value.length?(a(),n("div",ee,[(a(!0),n(I,null,D(v.value,e=>(a(),n("div",{key:e.id,class:"item-list",onClick:fe=>M(e)},[p("div",te,[p("div",ae,[e.status===1?(a(),n("div",{key:0,class:$(["tips",{"is-ar":s(N)}])},null,2)):x("v-if",!0),p("p",null,d(s(i)(s(r)[e.bizType].title)),1)]),p("p",null,d(e.timeStr),1)]),s(r)[e.bizType].key?(a(),n("p",ne,[s(r)[e.bizType].key==="creditScore"?(a(),n("span",{key:0,innerHTML:s(i)("systemMsgScore",{creditScore:T(e,s(r)[e.bizType].key)})},null,8,oe)):e.bizType==="inbox_recharge_success"?(a(),n("span",{key:1,innerHTML:s(i)("rechargeSuccessTips",{orderAmount:T(e,"orderAmount")})},null,8,le)):e.bizType==="inbox_withdraw_success"?(a(),n("span",{key:2,innerHTML:s(i)("withdrawalSuccessTips",{orderAmount:T(e,"orderAmount")})},null,8,ie)):e.bizType==="inbox_store_audit_fail"?(a(),n("span",{key:3,innerHTML:s(i)("storeAuthenticationFailedTips",{shop_name:b(e,"shop_name"),reason:b(e,"reason")})},null,8,re)):e.bizType==="inbox_store_audit_success"?(a(),n("span",{key:4,innerHTML:s(i)("storeAuthenticationPassedTips",{shop_name:b(e,"shop_name")})},null,8,ue)):(a(),n(I,{key:5},[p("span",null,d(s(i)(s(r)[e.bizType].txt)),1),p("span",null,d(T(e,s(r)[e.bizType].key)),1),s(r)[e.bizType].txt1?(a(),n("span",ce,d(s(i)(s(r)[e.bizType].txt1)),1)):x("v-if",!0)],64))])):(a(),n("p",de,d(s(i)(s(r)[e.bizType].txt,e.varObj)),1))],8,se))),128))])):x("v-if",!0),!v.value.length&&!_.value?(a(),j(l,{key:1,image:s(w).href},null,8,["image"])):x("v-if",!0)]),_:1},8,["loading","finished","loading-text","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"])])}}}),xe=H(_e,[["__scopeId","data-v-8d741b7f"],["__file","D:/caishen/mall-app-h5-vue/mall-app-h5-vue/src/views/message/system/index.vue"]]);export{xe as default};
