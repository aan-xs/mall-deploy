import{D,a6 as b,d as P,r as v,p as W,aM as C,aS as E,ad as M,aa as q,g as L,h as V,aT as $,e as i,I,aU as R,aQ as y,aV as A,a0 as O,P as Q}from"./index-761f4b55.js";const[U,c]=D("notice-bar"),X={text:String,mode:String,color:String,delay:b(1),speed:b(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var _=P({name:U,props:X,emits:["close","replay"],setup(e,{emit:m,slots:n}){let l=0,o=0,h;const d=v(),u=v(),t=W({show:!0,offset:0,duration:0}),p=()=>{if(n["left-icon"])return n["left-icon"]();if(e.leftIcon)return i(I,{class:c("left-icon"),name:e.leftIcon},null)},x=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},S=a=>{e.mode==="closeable"&&(t.show=!1,m("close",a))},k=()=>{if(n["right-icon"])return n["right-icon"]();const a=x();if(a)return i(I,{name:a,class:c("right-icon"),onClick:S},null)},N=()=>{t.offset=l,t.duration=0,A(()=>{y(()=>{t.offset=-o,t.duration=(o+l)/+e.speed,m("replay")})})},T=()=>{const a=e.scrollable===!1&&!e.wrapable,r={transform:t.offset?`translateX(${t.offset}px)`:"",transitionDuration:`${t.duration}s`};return i("div",{ref:d,role:"marquee",class:c("wrap")},[i("div",{ref:u,style:r,class:[c("content"),{"van-ellipsis":a}],onTransitionend:N},[n.default?n.default():e.text])])},s=()=>{const{delay:a,speed:r,scrollable:f}=e,B=O(a)?+a*1e3:0;l=0,o=0,t.offset=0,t.duration=0,clearTimeout(h),h=setTimeout(()=>{if(!d.value||!u.value||f===!1)return;const w=R(d).width,g=R(u).width;(f||g>w)&&y(()=>{l=w,o=g,t.offset=-o,t.duration=o/+r})},B)};return C(s),E(s),M("pageshow",s),q({reset:s}),L(()=>[e.text,e.scrollable],s),()=>{const{color:a,wrapable:r,background:f}=e;return V(i("div",{role:"alert",class:c({wrapable:r}),style:{color:a,background:f}},[p(),T(),k()]),[[$,t.show]])}}});const z=Q(_);export{z as N};
