(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c86f761"],{7662:function(t,e,a){},b73e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"newadd"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 新增属性 ")])],1),e("el-dialog",{attrs:{title:"属性名称",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"newadditem"},[e("span",[t._v("属性名称：")]),e("el-input",{attrs:{placeholder:"请输入属性名称"},model:{value:t.attributeName,callback:function(e){t.attributeName=e},expression:"attributeName"}})],1),e("div",{staticClass:"newadditem"},[e("span",[t._v("排序")]),e("el-input",{attrs:{placeholder:"请输入排序",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.attributeSort,callback:function(e){t.attributeSort=e},expression:"attributeSort"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.clickAdd}},[t._v(" 确 定 ")])],1)]),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",border:"",align:"center","header-cell-style":{background:"#e4e4e4"}}},[e("el-table-column",{attrs:{type:"selection",width:"80",align:"center"}}),e("el-table-column",{attrs:{label:"属性ID",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}])}),e("el-table-column",{attrs:{prop:"name",label:"属性名称",width:"200",align:"center"}}),e("el-table-column",{attrs:{prop:"attrCount",label:"规格数量",width:"140",align:"center"}}),e("el-table-column",{attrs:{prop:"sort",label:"排序",width:"140",align:"center"}}),e("el-table-column",{attrs:{label:"设置",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.goSpeci(a.row)}}},[t._v("规格列表")])]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.handleClick(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.delList(a.row)}}},[t._v("删除")])]}}])})],1),e("div",{staticClass:"pagenum"},[e("el-button",{attrs:{size:"mini",disabled:t.firstPage,round:""},on:{click:function(e){return t.goBack()}}},[t._v("首页")]),e("el-button",{attrs:{size:"mini",round:"",disabled:t.firstPage},on:{click:function(e){return t.goPre()}}},[t._v("上一页")]),e("el-button",{attrs:{size:"mini",round:"",disabled:""}},[t._v(t._s(t.pagesNum))]),e("el-button",{attrs:{size:"mini",disabled:t.lastPage,round:""},on:{click:function(e){return t.goNext()}}},[t._v("下一页")]),e("el-button",{attrs:{size:"mini",disabled:t.lastPage,round:""},on:{click:function(e){return t.goLast()}}},[t._v("尾页")])],1),e("el-dialog",{attrs:{title:"编辑",visible:t.dialogEdit,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogEdit=e}}},[e("div",{staticClass:"newadditem"},[e("span",[t._v("属性名称：")]),e("el-input",{attrs:{placeholder:"请输入属性名称"},model:{value:t.changeName,callback:function(e){t.changeName=e},expression:"changeName"}})],1),e("div",{staticClass:"newadditem"},[e("span",[t._v("排序")]),e("el-input",{attrs:{placeholder:"请输入排序",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.changeSort,callback:function(e){t.changeSort=e},expression:"changeSort"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogEdit=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.clickEdit}},[t._v(" 确 定 ")])],1)])],1)},s=[],l=a("365c"),n={data(){return{tableData:[],attributeName:"",attributeSort:"",changeName:"",changeSort:"",id:"",dialogVisible:!1,dialogEdit:!1,lastPage:!1,pagesNum:1,firstPage:!1,lastPageNum:1,falg:!1}},mounted(){this.getAttributeList(1)},methods:{goBack(){this.getAttributeList(1)},goLast(){this.getAttributeList(this.lastPageNum)},goNext(){this.getAttributeList(this.pagesNum+1)},goPre(){this.getAttributeList(this.pagesNum-1)},goSpeci(t){this.$router.push({path:"/specification",query:{id:t.id,attribute:t.name}})},clickAdd(){let t={name:this.attributeName,sort:this.attributeSort};this.attributeName&&this.attributeSort?(Object(l["a"])(t).then(t=>{0==t.code&&(this.$message({type:"success",message:"添加成功!"}),this.attributeName="",this.attributeSort="",10==this.$refs.multipleTable.tableData.length?this.getAttributeList(this.lastPageNum+1):this.getAttributeList(this.lastPageNum||1))}),this.dialogVisible=!1):this.$message({type:"warning",message:"请填写完整!"})},getAttributeList(t){let e={pageNum:t,pageSize:10};Object(l["g"])(e).then(t=>{this.tableData=t.data.elements,this.pagesNum=t.data.thisPageNumber,this.lastPageNum=t.data.totalPage||1,t.data.lastElementNumber-t.data.firstElementNumber==1?this.falg=!0:this.falg=!1,console.log("this.flag ->",this.falg),t.data.lastPage?this.lastPage=!0:this.lastPage=!1,1==t.data.thisPageNumber?this.firstPage=!0:this.firstPage=!1})},handleClick(t){this.id=t.id,this.changeName=t.name,this.changeSort=t.sort,this.dialogEdit=!0},clickEdit(){let t={name:this.changeName,sort:this.changeSort,id:this.id};this.changeName&&this.changeSort?Object(l["e"])(t).then(t=>{console.log("res ->",t),0==t.code&&(this.$alert("更新成功","提示",{confirmButtonText:"确定"}),this.dialogEdit=!1,this.getAttributeList(this.pagesNum))}):this.$message({type:"warning",message:"请填写完整!"})},delList(t){this.id=t.id,this.$confirm("此操作将永久删除该属性, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(l["c"])({id:this.id}).then(t=>{0==t.code&&(this.$message({type:"success",message:"删除成功!"}),this.getAttributeList(this.pagesNum))})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleClose(t){t()}}},o=n,r=(a("fd86"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,"d9296660",null);e["default"]=c.exports},fd86:function(t,e,a){"use strict";a("7662")}}]);