"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[3370],{61079:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"recharge",staticStyle:{"min-height":"100vh"}},[e("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:"Hive"==t.itemName?t.$t("加值"):t.$t("充值"),"left-arrow":"","right-text":t.$t("记录")},on:{"click-left":t.onClickLeft,"click-right":t.onClick1}}),e("div",{staticClass:"h46",staticStyle:{width:"100%"}}),e("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("区块链网络")))]),e("div",{staticClass:"duoxuan"},t._l(t.tongdao,(function(i,a){return e("div",{key:a,staticClass:"xuan1",class:t.tongdao_xuanzhong.blockchain_name===i.blockchain_name?"xuanzhong":"weixuan",on:{click:function(e){return t.tongdao_qiehuan(i)}}},[t._v(t._s(i.blockchain_name)+" "),t.tongdao_xuanzhong.blockchain_name===i.blockchain_name?e("van-icon",{staticClass:"xuanzhong-img rtl_selected",attrs:{"class-prefix":"icon",name:"xuanzejiaobiao"}}):t._e()],1)})),0),t._m(0),e("div",{staticClass:"baocunerweima"},[e("div",{staticClass:"baocunerweima-buuon",on:{click:t.baocunhaibao}},[t._v(t._s(t.$t("保存二维码")))])]),e("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("充值地址")))]),e("div",{staticClass:"chongzhifuzhi"},[e("div",{staticClass:"chongzhifuzhi2"},[e("div",{staticClass:"dizhi"},[t._v(t._s(t.tongdao_xuanzhong.address))]),e("div",{staticStyle:{flex:"1"}}),e("div",{staticClass:"fuzhi11",staticStyle:{color:"var(--main-color)"},on:{click:function(e){return t.copyData(t.tongdao_xuanzhong.address)}}},[t._v(t._s(t.$t("复制"))+" ")])])]),e("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.$t("充值数量")))]),e("div",{staticClass:"shuru"},[e("el-input",{attrs:{placeholder:t.$t("请输入充值数量"),type:"number",clearable:""},on:{input:t.handleInput},model:{value:t.it.input1,callback:function(e){t.$set(t.it,"input1",e)},expression:"it.input1"}})],1),e("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("预计到账"))+"("+t._s(t.$t("当前汇率"))+" 1 : "+t._s(t.tongdao_xuanzhong.fee>1?t.priceFormat(t.tongdao_xuanzhong.fee):t.tongdao_xuanzhong.fee)+")")]),e("div",{staticClass:"chongzhifuzhi"},[e("div",{staticClass:"chongzhifuzhi2"},[e("div",{staticClass:"dizhi"},[t._v(t._s(t.priceFormat(t.it.input1*t.tongdao_xuanzhong.fee)))]),e("div",{staticStyle:{flex:"1"}}),e("div",{staticClass:"fuzhi11"},[t._v("USDT")])])]),e("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("上传图片（上传支付详情截图）")))]),e("div",{staticClass:"shangchaun",staticStyle:{"margin-left":"15px",width:"100%",float:"left"}},[e("van-uploader",{attrs:{multiple:"","max-count":1,"preview-size":"120px","after-read":t.afterRead,accept:".png,.jpg,.jpeg"},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1),e("div",{staticClass:"tijiao"},[e("div",{staticClass:"tijiao2",on:{click:t.biaodan_tijiao}},[t._v(t._s(t.$t("提交")))])])],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"qrcode",staticStyle:{display:"flex","justify-content":"center","margin-top":"20px",width:"100%",float:"left"}},[e("canvas",{attrs:{id:"canvas"}})])}],s=(i(37850),i(88848)),o=(i(42511),i(29538)),r=(i(65825),i(19858)),l=i(38385),c=i(10408),u=i(14970),h={data(){return{priceFormat:c.XY,itemName:"TikTokMall",data:{},codes:"",tongdao_xuanzhong:{},imgUrl:null,tongdao:[],it:{input1:""},fileList:[],shangchuanurl:"",session_token:""}},components:{QRCode:l,[r.Z.name]:r.Z,[o.Z.name]:o.Z},created(){this.zhifutongdao()},methods:{handleInput(){this.it.input1=this.it.input1.replace(/[^\d.]/g,""),this.it.input1=this.it.input1.replace(/\.{2,}/g,"."),this.it.input1=this.it.input1.replace(/^\./g,""),this.it.input1=this.it.input1.replace(".","$#$").replace(/\./g,"").replace("$#$","."),["BTC","ETH"].includes(this.$route.query.type)?(this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,10}).*$/,"$1$2.$3"),this.it.input1=this.it.input1.replace(/^\D*(\d{0,10}(?:\.\d{0,10})?).*$/g,"$1")):this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,2}).*$/,"$1$2.$3")},biaodan_tijiao(){var t=this;""!==this.it.input1?""!==this.shangchuanurl?(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)<this.tongdao_xuanzhong.recharge_limit_min?(0,s.Z)(t.$t("充值价值不得小于最小限额")+this.tongdao_xuanzhong.recharge_limit_min+"usdt"):(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)>this.tongdao_xuanzhong.recharge_limit_max?(0,s.Z)(t.$t("充值价值不得大于最大限额")+this.tongdao_xuanzhong.recharge_limit_max+"usdt"):(0,u.BX)({}).then((t=>{this.session_token=t.session_token,this.chongzhitijiao()})):(0,s.Z)(t.$t("请上传图片")):(0,s.Z)(t.$t("请输入充值数量"))},chongzhitijiao(){var t={session_token:this.session_token,amount:this.it.input1,from:"123",blockchain_name:this.tongdao_xuanzhong.blockchain_name,img:this.shangchuanurl,coin:this.tongdao_xuanzhong.coin,channel_address:this.tongdao_xuanzhong.address,tx:"123"};s.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""}),(0,u.HO)(t).then((t=>{s.Z.clear(),(0,s.Z)(this.$t("提交成功")),this.it.input1="",this.fileList=[],this.shangchuanurl="",this.$router.push("/SubmitCompleted?path=rechargeRecord")})).catch((t=>{s.Z.clear()}))},tongdao_qiehuan(t){this.tongdao_xuanzhong=t,this.useqrcode1()},zhifutongdao(){(0,u.mo)({}).then((t=>{for(var e=0;e<t.length;e++)t[e]["coin"]===this.$route.query.type&&this.tongdao.push(t[e]);this.tongdao_xuanzhong=this.tongdao[0],this.useqrcode1()}))},afterRead(t){s.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""});let e=new FormData;e.append("file",t.file),e.append("moduleName","recharge"),(0,u.Eg)(e).then((t=>{s.Z.clear(),this.shangchuanurl=t})).catch((function(t){s.Z.clear(),(0,s.Z)(this.$t("添加失败")),this.fileList=[]}))},copyData(t){this.$copyText(t).then((t=>{(0,s.Z)(this.$t("复制成功"))}),(function(t){(0,s.Z)(this.$t("复制失败"))}))},copyData2(t){this.$copyText(t).then((t=>{}),(function(t){}))},useqrcode1(){let t=document.getElementById("canvas"),e=this.tongdao_xuanzhong.address;l.toCanvas(t,e,(function(t){})),this.saveImg()},baocunhaibao(){let t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png"),this.getUrlBase64(this.imgUrl).then((t=>{let e=document.createElement("a");e.href=t,e.download="qrCode.png",e.click()}))},getUrlBase64(t){return new Promise((e=>{let i=document.createElement("canvas"),a=i.getContext("2d"),n=new Image;n.crossOrigin="Anonymous",n.src=t,n.onload=function(){i.height=300,i.width=300,a.drawImage(n,0,0,300,300);let t=i.toDataURL("image/png");i=null,e(t)}}))},saveImg(){let t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png")},onClickLeft(){this.$router.push({path:"/rechargeList",dir:"left"})},onClick1(){this.$router.push({path:"/rechargeRecord"})}}},d=h,f=i(1001),p=(0,f.Z)(d,a,n,!1,null,"618a3eb4",null),g=p.exports},65825:function(t,e,i){i(22184),i(14106),i(4127)},35065:function(t,e,i){i.d(e,{f:function(){return a}});var a={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},29538:function(t,e,i){i.d(e,{Z:function(){return w}});var a=i(39299),n=i(53370),s=i(32667),o=i(80408);function r(t){return Array.isArray(t)?t:[t]}function l(t,e){return new Promise((function(i){if("file"!==e){var a=new FileReader;a.onload=function(t){i(t.target.result)},"dataUrl"===e?a.readAsDataURL(t):"text"===e&&a.readAsText(t)}else i(null)}))}function c(t,e){return r(t).some((function(t){return!!t&&((0,n.mf)(e)?e(t):t.size>e)}))}var u=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function h(t){return u.test(t)}function d(t){return!!t.isImage||(t.file&&t.file.type?0===t.file.type.indexOf("image"):t.url?h(t.url):!!t.content&&0===t.content.indexOf("data:image"))}var f=i(35065),p=i(19858),g=i(84639),v=i(94958),m=i(76471),_=(0,s.d)("uploader"),x=_[0],y=_[1],w=x({inheritAttrs:!1,mixins:[f.f],model:{prop:"fileList"},props:{disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],previewOptions:Object,name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:[Number,String,Function],default:Number.MAX_VALUE},maxCount:{type:[Number,String],default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},showUpload:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"},uploadIcon:{type:String,default:"photograph"}},computed:{previewSizeWithUnit:function(){return(0,o.N)(this.previewSize)},value:function(){return this.fileList}},created:function(){this.urls=[]},beforeDestroy:function(){this.urls.forEach((function(t){return URL.revokeObjectURL(t)}))},methods:{getDetail:function(t){return void 0===t&&(t=this.fileList.length),{name:this.name,index:t}},onChange:function(t){var e=this,i=t.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){var a=this.beforeRead(i,this.getDetail());if(!a)return void this.resetInput();if((0,n.tI)(a))return void a.then((function(t){t?e.readFile(t):e.readFile(i)})).catch(this.resetInput)}this.readFile(i)}},readFile:function(t){var e=this,i=c(t,this.maxSize);if(Array.isArray(t)){var a=this.maxCount-this.fileList.length;t.length>a&&(t=t.slice(0,a)),Promise.all(t.map((function(t){return l(t,e.resultType)}))).then((function(a){var n=t.map((function(t,e){var i={file:t,status:"",message:""};return a[e]&&(i.content=a[e]),i}));e.onAfterRead(n,i)}))}else l(t,this.resultType).then((function(a){var n={file:t,status:"",message:""};a&&(n.content=a),e.onAfterRead(n,i)}))},onAfterRead:function(t,e){var i=this;this.resetInput();var a=t;if(e){var n=t;Array.isArray(t)?(n=[],a=[],t.forEach((function(t){t.file&&(c(t.file,i.maxSize)?n.push(t):a.push(t))}))):a=null,this.$emit("oversize",n,this.getDetail())}var s=Array.isArray(a)?Boolean(a.length):Boolean(a);s&&(this.$emit("input",[].concat(this.fileList,r(a))),this.afterRead&&this.afterRead(a,this.getDetail()))},onDelete:function(t,e){var i,a=this,s=null!=(i=t.beforeDelete)?i:this.beforeDelete;if(s){var o=s(t,this.getDetail(e));if(!o)return;if((0,n.tI)(o))return void o.then((function(){a.deleteFile(t,e)})).catch(n.ZT)}this.deleteFile(t,e)},deleteFile:function(t,e){var i=this.fileList.slice(0);i.splice(e,1),this.$emit("input",i),this.$emit("delete",t,this.getDetail(e))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onClickUpload:function(t){this.$emit("click-upload",t)},onPreviewImage:function(t){var e=this;if(this.previewFullImage){var i=this.fileList.filter((function(t){return d(t)})),n=i.map((function(t){return t.file&&!t.url&&"failed"!==t.status&&(t.url=URL.createObjectURL(t.file),e.urls.push(t.url)),t.url}));this.imagePreview=(0,m.Z)((0,a.Z)({images:n,startPosition:i.indexOf(t),onClose:function(){e.$emit("close-preview")}},this.previewOptions))}},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},chooseFile:function(){this.disabled||this.$refs.input&&this.$refs.input.click()},genPreviewMask:function(t){var e=this.$createElement,i=t.status,a=t.message;if("uploading"===i||"failed"===i){var s="failed"===i?e(p.Z,{attrs:{name:"close"},class:y("mask-icon")}):e(v.Z,{class:y("loading")}),o=(0,n.Xq)(a)&&""!==a;return e("div",{class:y("mask")},[s,o&&e("div",{class:y("mask-message")},[a])])}},genPreviewItem:function(t,e){var i,n,s,o=this,r=this.$createElement,l=null!=(i=t.deletable)?i:this.deletable,c="uploading"!==t.status&&l,u=c&&r("div",{class:y("preview-delete"),on:{click:function(i){i.stopPropagation(),o.onDelete(t,e)}}},[r(p.Z,{attrs:{name:"cross"},class:y("preview-delete-icon")})]),h=this.slots("preview-cover",(0,a.Z)({index:e},t)),f=h&&r("div",{class:y("preview-cover")},[h]),v=null!=(n=t.previewSize)?n:this.previewSize,m=null!=(s=t.imageFit)?s:this.imageFit,_=d(t)?r(g.Z,{attrs:{fit:m,src:t.content||t.url,width:v,height:v,lazyLoad:this.lazyLoad},class:y("preview-image"),on:{click:function(){o.onPreviewImage(t)}}},[f]):r("div",{class:y("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[r(p.Z,{class:y("file-icon"),attrs:{name:"description"}}),r("div",{class:[y("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),f]);return r("div",{class:y("preview"),on:{click:function(){o.$emit("click-preview",t,o.getDetail(e))}}},[_,this.genPreviewMask(t),u])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var e,i=this.slots(),n=this.readonly?null:t("input",{attrs:(0,a.Z)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:y("input"),on:{change:this.onChange}});if(i)return t("div",{class:y("input-wrapper"),key:"input-wrapper",on:{click:this.onClickUpload}},[i,n]);if(this.previewSize){var s=this.previewSizeWithUnit;e={width:s,height:s}}return t("div",{directives:[{name:"show",value:this.showUpload}],class:y("upload",{readonly:this.readonly}),style:e,on:{click:this.onClickUpload}},[t(p.Z,{attrs:{name:this.uploadIcon},class:y("upload-icon")}),this.uploadText&&t("span",{class:y("upload-text")},[this.uploadText]),n])}}},render:function(){var t=arguments[0];return t("div",{class:y()},[t("div",{class:y("wrapper",{disabled:this.disabled})},[this.genPreviewList(),this.genUpload()])])}})},42511:function(t,e,i){i(22184),i(74048),i(14106),i(4127),i(96073),i(44174),i(43874),i(45353),i(86051),i(57462)}}]);