(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[558],{55982:function(t,e,i){i(24714),function(e,i){t.exports=i()}(0,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";var n;function r(t){return["image/png","image/jpeg","image/gif"].some((e=>e===t))}i.r(e),i.d(e,"canvastoDataURL",(function(){return s})),i.d(e,"canvastoFile",(function(){return o})),i.d(e,"dataURLtoFile",(function(){return c})),i.d(e,"dataURLtoImage",(function(){return u})),i.d(e,"downloadFile",(function(){return d})),i.d(e,"filetoDataURL",(function(){return h})),i.d(e,"imagetoCanvas",(function(){return p})),i.d(e,"urltoBlob",(function(){return g})),i.d(e,"urltoImage",(function(){return m})),i.d(e,"compress",(function(){return w})),i.d(e,"compressAccurately",(function(){return A})),i.d(e,"EImageType",(function(){return n})),function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.GIF="image/gif"}(n||(n={}));var a=function(t,e,i,n){return new(i||(i=Promise))((function(r,a){function s(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}l((n=n.apply(t,e||[])).next())}))};function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.92,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.JPEG;return a(this,void 0,void 0,(function*(){return r(i)||(i=n.JPEG),t.toDataURL(i,e)}))}function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.92,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.JPEG;return new Promise((n=>t.toBlob((t=>n(t)),i,e)))}var l=function(t,e,i,n){return new(i||(i=Promise))((function(r,a){function s(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}l((n=n.apply(t,e||[])).next())}))};function c(t,e){return l(this,void 0,void 0,(function*(){const i=t.split(",");let n=i[0].match(/:(.*?);/)[1];const a=atob(i[1]);let s=a.length;const o=new Uint8Array(s);for(;s--;)o[s]=a.charCodeAt(s);return r(e)&&(n=e),new Blob([o],{type:n})}))}function u(t){return new Promise(((e,i)=>{const n=new Image;n.onload=()=>e(n),n.onerror=()=>i(new Error("dataURLtoImage(): dataURL is illegal")),n.src=t}))}function d(t,e){const i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.download=e||Date.now().toString(36),document.body.appendChild(i);const n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),i.dispatchEvent(n),document.body.removeChild(i)}function h(t){return new Promise((e=>{const i=new FileReader;i.onloadend=t=>e(t.target.result),i.readAsDataURL(t)}))}var f=function(t,e,i,n){return new(i||(i=Promise))((function(r,a){function s(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}l((n=n.apply(t,e||[])).next())}))};function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,(function*(){const i=Object.assign({},e),n=document.createElement("canvas"),r=n.getContext("2d");let a,s;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=Number(i[t]));if(i.scale){const e=i.scale>0&&i.scale<10?i.scale:1;s=t.width*e,a=t.height*e}else s=i.width||i.height*t.width/t.height||t.width,a=i.height||i.width*t.height/t.width||t.height;switch([5,6,7,8].some((t=>t===i.orientation))?(n.height=s,n.width=a):(n.height=a,n.width=s),i.orientation){case 3:r.rotate(180*Math.PI/180),r.drawImage(t,-n.width,-n.height,n.width,n.height);break;case 6:r.rotate(90*Math.PI/180),r.drawImage(t,0,-n.width,n.height,n.width);break;case 8:r.rotate(270*Math.PI/180),r.drawImage(t,-n.height,0,n.height,n.width);break;case 2:r.translate(n.width,0),r.scale(-1,1),r.drawImage(t,0,0,n.width,n.height);break;case 4:r.translate(n.width,0),r.scale(-1,1),r.rotate(180*Math.PI/180),r.drawImage(t,-n.width,-n.height,n.width,n.height);break;case 5:r.translate(n.width,0),r.scale(-1,1),r.rotate(90*Math.PI/180),r.drawImage(t,0,-n.width,n.height,n.width);break;case 7:r.translate(n.width,0),r.scale(-1,1),r.rotate(270*Math.PI/180),r.drawImage(t,-n.height,0,n.height,n.width);break;default:r.drawImage(t,0,0,n.width,n.height)}return n}))}function g(t){return fetch(t).then((t=>t.blob()))}function m(t){return new Promise(((e,i)=>{const n=new Image;n.onload=()=>e(n),n.onerror=()=>i(new Error("urltoImage(): Image failed to load, please check the image URL")),n.src=t}))}var v=function(t,e,i,n){return new(i||(i=Promise))((function(r,a){function s(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,o)}l((n=n.apply(t,e||[])).next())}))};function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,void 0,void 0,(function*(){if(!(t instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if("object"!=typeof e&&(e=Object.assign({quality:e})),e.quality=Number(e.quality),Number.isNaN(e.quality))return t;const i=yield h(t);let a=i.split(",")[0].match(/:(.*?);/)[1],o=n.JPEG;r(e.type)&&(o=e.type,a=e.type);const l=yield u(i),d=yield p(l,Object.assign({},e)),f=yield s(d,e.quality,o),g=yield c(f,a);return g.size>t.size?t:g}))}function A(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,void 0,void 0,(function*(){if(!(t instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if("object"!=typeof e&&(e=Object.assign({size:e})),e.size=Number(e.size),Number.isNaN(e.size))return t;if(1024*e.size>t.size)return t;e.accuracy=Number(e.accuracy),(!e.accuracy||e.accuracy<.8||e.accuracy>.99)&&(e.accuracy=.95);const i=e.size*(2-e.accuracy)*1024,a=1024*e.size,o=e.size*e.accuracy*1024,l=yield h(t);let d=l.split(",")[0].match(/:(.*?);/)[1],f=n.JPEG;r(e.type)&&(f=e.type,d=e.type);const g=yield u(l),m=yield p(g,Object.assign({},e));let v,w=.5;const A=[null,null];for(let t=1;t<=7;t++){v=yield s(m,w,f);const e=.75*v.length;if(7===t){(i<e||o>e)&&(v=[v,...A].filter((t=>t)).sort(((t,e)=>Math.abs(.75*t.length-a)-Math.abs(.75*e.length-a)))[0]);break}if(i<e)A[1]=v,w-=Math.pow(.5,t+1);else{if(!(o>e))break;A[0]=v,w+=Math.pow(.5,t+1)}}const y=yield c(v,d);return y.size>t.size?t:y}))}}])}))},96024:function(t,e,i){i(55982)},44033:function(t,e,i){"use strict";i(95812),i(57846),i(35726),i(25310),i(7023)},76166:function(t,e,i){"use strict";i(95812),i(43883),i(57846),i(35726),i(43464),i(19591),i(64733),i(34932),i(90973),i(11941)},44975:function(t,e,i){"use strict";i.d(e,{f:function(){return n}});var n={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},20953:function(t,e,i){"use strict";i.d(e,{Z:function(){return b}});i(73927);var n=i(11084),r=i(94868),a=i(26870),s=i(71149);function o(t){return Array.isArray(t)?t:[t]}function l(t,e){return new Promise((function(i){if("file"!==e){var n=new FileReader;n.onload=function(t){i(t.target.result)},"dataUrl"===e?n.readAsDataURL(t):"text"===e&&n.readAsText(t)}else i(null)}))}function c(t,e){return o(t).some((function(t){return!!t&&((0,s.mf)(e)?e(t):t.size>e)}))}var u=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function d(t){return u.test(t)}function h(t){return!!t.isImage||(t.file&&t.file.type?0===t.file.type.indexOf("image"):t.url?d(t.url):!!t.content&&0===t.content.indexOf("data:image"))}var f=i(44975),p=i(18850),g=i(21733),m=i(70854),v=i(92562),w=(0,r.d)("uploader"),A=w[0],y=w[1],b=A({inheritAttrs:!1,mixins:[f.f],model:{prop:"fileList"},props:{disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],previewOptions:Object,name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:[Number,String,Function],default:Number.MAX_VALUE},maxCount:{type:[Number,String],default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},showUpload:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"},uploadIcon:{type:String,default:"photograph"}},computed:{previewSizeWithUnit:function(){return(0,a.N)(this.previewSize)},value:function(){return this.fileList}},created:function(){this.urls=[]},beforeDestroy:function(){this.urls.forEach((function(t){return URL.revokeObjectURL(t)}))},methods:{getDetail:function(t){return void 0===t&&(t=this.fileList.length),{name:this.name,index:t}},onChange:function(t){var e=this,i=t.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){var n=this.beforeRead(i,this.getDetail());if(!n)return void this.resetInput();if((0,s.tI)(n))return void n.then((function(t){t?e.readFile(t):e.readFile(i)})).catch(this.resetInput)}this.readFile(i)}},readFile:function(t){var e=this,i=c(t,this.maxSize);if(Array.isArray(t)){var n=this.maxCount-this.fileList.length;t.length>n&&(t=t.slice(0,n)),Promise.all(t.map((function(t){return l(t,e.resultType)}))).then((function(n){var r=t.map((function(t,e){var i={file:t,status:"",message:""};return n[e]&&(i.content=n[e]),i}));e.onAfterRead(r,i)}))}else l(t,this.resultType).then((function(n){var r={file:t,status:"",message:""};n&&(r.content=n),e.onAfterRead(r,i)}))},onAfterRead:function(t,e){var i=this;this.resetInput();var n=t;if(e){var r=t;Array.isArray(t)?(r=[],n=[],t.forEach((function(t){t.file&&(c(t.file,i.maxSize)?r.push(t):n.push(t))}))):n=null,this.$emit("oversize",r,this.getDetail())}var a=Array.isArray(n)?Boolean(n.length):Boolean(n);a&&(this.$emit("input",[].concat(this.fileList,o(n))),this.afterRead&&this.afterRead(n,this.getDetail()))},onDelete:function(t,e){var i,n=this,r=null!=(i=t.beforeDelete)?i:this.beforeDelete;if(r){var a=r(t,this.getDetail(e));if(!a)return;if((0,s.tI)(a))return void a.then((function(){n.deleteFile(t,e)})).catch(s.ZT)}this.deleteFile(t,e)},deleteFile:function(t,e){var i=this.fileList.slice(0);i.splice(e,1),this.$emit("input",i),this.$emit("delete",t,this.getDetail(e))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onClickUpload:function(t){this.$emit("click-upload",t)},onPreviewImage:function(t){var e=this;if(this.previewFullImage){var i=this.fileList.filter((function(t){return h(t)})),r=i.map((function(t){return t.file&&!t.url&&"failed"!==t.status&&(t.url=URL.createObjectURL(t.file),e.urls.push(t.url)),t.url}));this.imagePreview=(0,v.Z)((0,n.Z)({images:r,startPosition:i.indexOf(t),onClose:function(){e.$emit("close-preview")}},this.previewOptions))}},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},chooseFile:function(){this.disabled||this.$refs.input&&this.$refs.input.click()},genPreviewMask:function(t){var e=this.$createElement,i=t.status,n=t.message;if("uploading"===i||"failed"===i){var r="failed"===i?e(p.Z,{attrs:{name:"close"},class:y("mask-icon")}):e(m.Z,{class:y("loading")}),a=(0,s.Xq)(n)&&""!==n;return e("div",{class:y("mask")},[r,a&&e("div",{class:y("mask-message")},[n])])}},genPreviewItem:function(t,e){var i,r,a,s=this,o=this.$createElement,l=null!=(i=t.deletable)?i:this.deletable,c="uploading"!==t.status&&l,u=c&&o("div",{class:y("preview-delete"),on:{click:function(i){i.stopPropagation(),s.onDelete(t,e)}}},[o(p.Z,{attrs:{name:"cross"},class:y("preview-delete-icon")})]),d=this.slots("preview-cover",(0,n.Z)({index:e},t)),f=d&&o("div",{class:y("preview-cover")},[d]),m=null!=(r=t.previewSize)?r:this.previewSize,v=null!=(a=t.imageFit)?a:this.imageFit,w=h(t)?o(g.Z,{attrs:{fit:v,src:t.content||t.url,width:m,height:m,lazyLoad:this.lazyLoad},class:y("preview-image"),on:{click:function(){s.onPreviewImage(t)}}},[f]):o("div",{class:y("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[o(p.Z,{class:y("file-icon"),attrs:{name:"description"}}),o("div",{class:[y("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),f]);return o("div",{class:y("preview"),on:{click:function(){s.$emit("click-preview",t,s.getDetail(e))}}},[w,this.genPreviewMask(t),u])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var e,i=this.slots(),r=this.readonly?null:t("input",{attrs:(0,n.Z)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:y("input"),on:{change:this.onChange}});if(i)return t("div",{class:y("input-wrapper"),key:"input-wrapper",on:{click:this.onClickUpload}},[i,r]);if(this.previewSize){var a=this.previewSizeWithUnit;e={width:a,height:a}}return t("div",{directives:[{name:"show",value:this.showUpload}],class:y("upload",{readonly:this.readonly}),style:e,on:{click:this.onClickUpload}},[t(p.Z,{attrs:{name:this.uploadIcon},class:y("upload-icon")}),this.uploadText&&t("span",{class:y("upload-text")},[this.uploadText]),r])}}},render:function(){var t=arguments[0];return t("div",{class:y()},[t("div",{class:y("wrapper",{disabled:this.disabled})},[this.genPreviewList(),this.genUpload()])])}})},59701:function(t,e,i){"use strict";i(95812),i(43883),i(57846),i(35726),i(43464),i(19591),i(64733),i(34932),i(90973),i(11941)},22745:function(t,e,i){"use strict";i.d(e,{$8:function(){return g},AY:function(){return x},D8:function(){return f},Ew:function(){return u},Ko:function(){return s},Mz:function(){return y},NP:function(){return S},S:function(){return v},VU:function(){return d},ZO:function(){return h},_T:function(){return b},aN:function(){return o},gv:function(){return p},h2:function(){return l},lR:function(){return m},mh:function(){return r},nT:function(){return w},tr:function(){return a},w:function(){return A},yS:function(){return c}});var n=i(83562);const r=t=>(0,n.Z)({url:"api/sellerGoods!info.action",method:"post",params:t}),a=t=>(0,n.Z)({url:"/api/evaluation!list.action",method:"post",params:t}),s=t=>(0,n.Z)({url:"api/seller!info.action",method:"post",params:t}),o=t=>(0,n.Z)({url:"api/order!submit.action",method:"post",params:t}),l=t=>(0,n.Z)({url:"api/order!pay.action",method:"post",params:t}),c=t=>(0,n.Z)({url:"api/order!info.action",method:"post",params:{...t,loginType:"user"}}),u=t=>(0,n.Z)({url:"/seller/version!register.action",method:"post",params:t}),d=t=>(0,n.Z)({url:"api/uploadimg!execute.action",method:"post",data:t}),h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({url:"api/address!listCountry.action",method:"post",params:t})},f=t=>(0,n.Z)({url:"/seller/version!registerjs.action",method:"post",params:t}),p=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({url:"api/jscode!execute.action",method:"post",params:t})},g=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({url:"api/sysParaSign!info.action",method:"post",params:t})},m=t=>(0,n.Z)({url:"api/kyc!get.action",method:"post",params:t}),v=t=>(0,n.Z)({url:"api/keepGoods!add.action",method:"post",params:t}),w=t=>(0,n.Z)({url:"api/keepGoods!del.action",method:"post",params:t}),A=t=>(0,n.Z)({url:"api/evaluation!countType.action",method:"post",params:t}),y=t=>(0,n.Z)({url:"api/sellerGoods!recommend_like.action",method:"post",params:t}),b=t=>(0,n.Z)({url:"api/cart!add.action",method:"post",params:t}),x=t=>(0,n.Z)({url:"api/cart!list.action",method:"post",params:t}),S=t=>(0,n.Z)({url:"api/cart!update.action",method:"post",params:t})},63070:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return y}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"service-box"},[e("van-nav-bar",{attrs:{"safe-area-inset-top":"",title:t.$t("在线客服"),"left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}}),e("div",{staticStyle:{width:"100%",height:"46px"}}),e("div",{ref:"chatView",class:["content",t.isApp&&"app_content"]},[e("div",{staticClass:"flex flex-col px-15 box-border"},[e("div",{staticClass:"w-full py-10 text-grey text-center",staticStyle:{"font-size":"14px"},style:{visibility:t.finished?"hidden":"visiable"},on:{click:t.onMore}},[t._v(" "+t._s(t.$t("历史消息"))+" ")]),e("ul",{staticClass:"flex flex-col"},t._l(t.list,(function(n){return e("li",{directives:[{name:"show",rawName:"v-show",value:0==n.delete_status,expression:"item.delete_status == 0"}],key:n.id,staticClass:"flex flex-col mt-20"},[t.showTime(n)?e("p",{staticClass:"font-26 flex py-20 text-grey time",class:"send"===n.send_receive?"justify-end":"",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(n.createtime)+" ")]):t._e(),e("div",{staticClass:"flex",class:"send"===n.send_receive?"justify-end":""},["receive"===n.send_receive?[e("img",{staticClass:"w-44 h-44 mr-10",staticStyle:{"border-radius":"50%"},attrs:{src:t.responserAvatar,"object-fit":"cover"}}),e("div",{staticClass:"responser bg-grey px-15 py-12 font-30 rounded-lg",staticStyle:{"font-size":"14px"}},["text"===n.type?e("div",{staticClass:"break-word"},[e("p",{staticStyle:{"max-width":"231px"},domProps:{innerHTML:t._s(n.content)}})]):e("img",{staticClass:"max-w-200",attrs:{src:n.content},on:{click:function(e){return t.onPreview(n.content)}}})])]:e("div",{staticClass:"border-solid py-12 px-15 rounded-lg flex flex-col",staticStyle:{"font-size":"14px"}},["img"===n.type?e("img",{staticClass:"max-w-200",attrs:{src:`${n.content}`},on:{click:function(e){return t.onPreview(n.content)}}}):e("div",{staticClass:"break-word"},[e("p",{staticStyle:{"max-width":"232px"},domProps:{innerHTML:t._s(n.content)}})])]),"send"===n.send_receive?e("img",{staticStyle:{width:"44px",height:"44px","margin-left":"10px","border-radius":"50%"},attrs:{src:i(62829)(`./${t.userInfo?.avatar||1}.png`)}}):t._e()],2)])})),0)])]),e("div",{staticClass:"bottom flex justify-between items-center w-full fixed bottom-0 border-t-grey px-10 box-border bg-white msg_bottom",style:t.isApp?{marginBottom:"20px"}:{}},[e("van-uploader",{attrs:{"after-read":t.afterRead}},[e("img",{staticClass:"w-24 h-24",attrs:{src:i(62226)}})]),e("van-field",{staticClass:"flex-1 mx-20 h-full border-none",attrs:{rows:"1",autosize:{maxHeight:25,minHeight:25},type:"textarea",maxlength:"200",placeholder:t.$t("请输入您的消息...")},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("div",{staticClass:"fasong",on:{click:function(e){return t.send("text",t.value)}}},[t._v(t._s(t.$t("发送")))])],1)],1)},r=[],a=(i(76166),i(92562)),s=(i(44033),i(69390)),o=(i(59701),i(20953)),l=(i(73927),i(83562));const c=t=>(0,l.Z)({url:"api/newOnlinechat!list.action",method:"GET",params:{token:t.token,message_id:t.message_id||"",show_img:t.show_img||!0}}),u=()=>(0,l.Z)({url:"api/newOnlinechat!unread.action",loading:!0,method:"GET"}),d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(0,l.Z)({url:"api/newOnlinechat!send.action",method:"GET",params:{type:t,content:e,token:i}})};i(43635),i(8245),i(96024);var h=i(72789);!{NODE_ENV:"production",VUE_APP_FOOTER_COLOR:"#f89900",VUE_APP_ITEM_NAME:"SM-wholesaleShop",VUE_APP_MAIN_COLOR:"#f89900",BASE_URL:"./"}.VUE_APP_IS_APP?location.origin:h.Z.$store.state.multiItem["SM-wholesaleShop"].app_url;var f=i(70471),p=i(22745),g=i(14534),m={name:"CustomerService",components:{[o.Z.name]:o.Z,[s.Z.name]:s.Z},data(){return{list:[],value:"",lastMsgId:"",interval:null,unread:0,finished:!1,androidAttrs:null,token_url:"",isFirstRequest:!0,responserAvatar:"",msgLength:0,isApp:!!window.plus}},computed:{...(0,f.Se)({activeLang:"language",userInfo:"userInfo"})},mounted(){["Argos","ArgosShop"].includes("SM-wholesaleShop")?this.responserAvatar=i(28034):this.responserAvatar=i(70572),this.$route.query.token?this.token_url=this.$route.query.token:localStorage.getItem("token")&&(this.token_url=localStorage.getItem("token")),this.$route.query.lang&&("cn"==this.$route.query.lang?this.handleSetLang("cn"):"tw"==this.$route.query.lang?this.handleSetLang("tw"):this.handleSetLang("en")),this.fetchList();const t=navigator.userAgent;this.androidAttrs=t.indexOf("Android")>-1||t.indexOf("Linux")>-1},methods:{...(0,f.OI)(["setLanguage"]),handleSetLang(t){this.$i18n.locale=t,this.setLanguage(t)},onPreview(t){(0,a.Z)([t])},showTime(t){return!!t.createtime},afterRead(t){this.$toast.loading({duration:0}),this.$toast.loading({duration:0});var e=this;let i=new FormData;i.append("file",t.file),i.append("moduleName","123"),(0,p.VU)(i).then((t=>{e.$toast.clear(),g.log(t),e.send("img",t)})).catch((t=>{g.log(t),this.$toast.clear()}))},fetchList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c({token:this.token_url,message_id:t}).then((e=>{if(null==e&&(e=[]),this.lastMsgId||(this.lastMsgId=e.length&&e[e.length-1]["id"]),e.length){if(t)this.lastMsgId=e[e.length-1]["id"],this.list=[...e.reverse(),...this.list];else{this.list=[...this.list,...e.reverse()];let t={};this.list=this.list.reduce(((e,i)=>(t[i.id]||(t[i.id]=e.push(i)),e)),[])}if(e.length<10&&(this.finished=!0),this.isFirstRequest){const t=this;this.$nextTick((()=>{const e=this.$refs.chatView;e&&(e.scrollTop=e.scrollHeight,t.isFirstRequest=!1)}))}}else this.list=[{id:"1",send_receive:"receive",content:this.$t("你好，欢迎来到我们的平台！"),type:"text"}];t||(this.clearInterval(),this.interval=setInterval((()=>{this.fetchList()}),1e3)),this.msgLength!==this.list.length&&(this.scrollToBottom(),this.msgLength=this.list.length),this.list=this.list.map((t=>({...t,content:t.content.replaceAll("\n","<br/>")}))),this.list.forEach(((t,i)=>{e.forEach((e=>{t.id==e.id&&e.delete_status!=t.delete_status&&(t.delete_status=e.delete_status)}))}))}))},onMore(){this.fetchList(this.lastMsgId)},clearInterval(){this.interval&&(clearInterval(this.interval),this.interval=null)},fetchUnread(){u().then((t=>{this.unread=t}))},onClickLeft(){this.$router.go(-1)},send(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e?d(t,e,this.token_url).then((t=>{this.value="",this.isFirstRequest=!0,this.fetchList()})):this.$notify(this.$t("请输入消息内容"))},scrollToBottom(){this.$nextTick((()=>{try{this.$refs.chatView.scrollTo({top:this.$refs.chatView.scrollHeight,behavior:"smooth"})}catch(t){scrollTo(9999999,9999999)}}))}},beforeDestroy(){this.clearInterval(),this.fetchList=null}},v=m,w=i(80062),A=(0,w.Z)(v,n,r,!1,null,"27653766",null),y=A.exports},28034:function(t,e,i){"use strict";t.exports=i.p+"img/avatar.9b22d5e0.png"},62226:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJvSURBVHgB7ZtNbhoxGIZfAwvUVY+QGzRdsiqzaPc5QbkBvQHDDeAG6TVSVUMWFeqq6Q1yhCwqStNkHH8RlrLANg6e0czwPtLIlj5rJD/y8PkPgBBCCCGEEEJI3ahQg6L49fYB26mpjndPB1A3Gnr5KRtdBlv6gkWxPns0hQbO0EFM52/7QJZlo1tXm57vBV2WI0jfpI/ylbjaOAVdFT8mXZZjkT7eY/PFFXcKUuhPcSL00PvgjjnR5zgdxq7AAJF8zEbBzNdkvhVrHdO+B+KFggJQUAAKCkBBAaKzmA+7bjNp7nmSKVN5U14OMFxm2fs7tJBkI0jk/Nfblanmdga+K/MH/PNO55tMMkEl7qdK4d3+qD73TeebTDJBGuXEF++j9xktJKEg/8K2rQvfZILkB9kX14F4U0k5gr7646U3fijfi58zs56aoSaSCRpgu5CtzH2xUuP3Bm8WOBKRU6LMTTWvS1IyQWbf8m6Av5mpzu3ntPvs5hs1HF8cOQ96IcdSi6SkE0WRZIp89yRjjxyLSJItmDkqovFLDY8cS6UjqdGCDpBjqUxSbYJis0+EHEslkmoRFJt9XiHHklxS5YJis88Rcg56fyyVCgpkn1lE+1hyJKIyQbHZJ6GcpCSdB1kis48c3KGJcoRKBMVmH9MeTYV70gEoKAAFBaCgABQUoJIs1vYbIC/hCApAQQEoKAAFBaCgANFZLPaOX9vxjCC1wsmgb1wR3zXga5wIGmrpijkFyUlpW8/TY5A++v7U4hQkh4CPpuiyJOmb9NHX5qAlwVWxniioaYdu36/Mc/0Hw8VFS68GEkIIIYQQQkiXeQJ31xQ8cq8AoAAAAABJRU5ErkJggg=="},70572:function(t){"use strict";t.exports="data:image/png;base64,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"}}]);