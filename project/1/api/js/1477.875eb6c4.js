"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[1477],{91477:function(t,i,s){s.r(i),s.d(i,{default:function(){return A}});var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"page-content",staticStyle:{"min-height":"100vh"}},[i("nationality-list",{ref:"controlChild",attrs:{title:t.$t("选择区域码")},on:{getName:function(i){return t.getName(arguments)}}}),i("Vcode",{staticStyle:{direction:"ltr"},attrs:{imgs:[t.img1,t.img2,t.img3,t.img4,t.img5],show:t.show,canvasHeight:200,sliderText:t.$t("拖动滑块以完成拼图"),successText:t.$t("验证通过!"),failText:t.$t("验证失败,请重试")},on:{success:t.onSuccess,close:function(i){t.show=!1}}}),i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("手机绑定"),"left-arrow":""},on:{"click-left":t.onClickLeft}}),i("div",{staticClass:"h46",staticStyle:{width:"100%"}}),i("div",{staticClass:"form-content"},[i("div",{staticClass:"form-item"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("手机号")))]),i("div",{staticClass:"input-content"},[i("el-input",{attrs:{placeholder:t.$t("请输入手机号"),maxlength:"20",clearable:""},model:{value:t.formData.phone,callback:function(i){t.$set(t.formData,"phone",i)},expression:" formData.phone "}},[i("div",{attrs:{slot:"prepend"},on:{click:t.openNational},slot:"prepend"},[i("p",[t._v("+"),i("span",[t._v(t._s(t.dialCode))]),t._v(" "),i("img",{staticClass:"icon",attrs:{src:t.triangleDown,alt:""}})])])])],1)]),i("div",{staticClass:"form-item"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("验证码")))]),i("div",{staticClass:"input-content code"},[i("el-input",{attrs:{placeholder:t.$t("请输入验证码"),maxlength:"6"},model:{value:t.formData.verifcode,callback:function(i){t.$set(t.formData,"verifcode",i)},expression:" formData.verifcode "}}),i("div",{staticClass:"btn",class:{disabled:t.btnDisabled},on:{click:t.getCode}},[t._v(t._s(t.codeBtnTxt))])],1)]),i("div",{staticClass:"submit-btn",on:{click:t.submitVertify}},[t._v(t._s(t.$t("提交")))])])],1)},a=[],o=(s(37850),s(88848)),n=s(56744),l=s.n(n),c=s(38211),h=s(90925),r=s(14970),d={name:"BindPhone",components:{NationalityList:c.Z,Vcode:l()},data(){return{img1:s(38580),img2:s(31406),img3:s(75042),img4:s(5431),img5:s(41376),triangleDown:s(44499),show:!1,pageDiaCode:!1,dialCode:localStorage.getItem("dialCode")||1,codeBtnTxt:this.$t("收取验证码"),count:60,interval:null,btnDisabled:!1,formData:{phone:"",verifcode:""}}},methods:{onClickLeft(){this.$router.push({path:"/Setting",dir:"left"})},onSuccess(){this.submitHandle(),this.show=!1},getName(t){this.pageDiaCode?(this.dialCode=t[2],localStorage.setItem("dialCode",this.dialCode)):this.pageDiaCode=!0},openNational(){this.$refs.controlChild.open()},getCode(){if(""===this.formData.phone)return void(0,o.Z)(this.$t("请输入手机号"));{const t=/^[0-9]+[0-9]*$/;if(!t.test(this.formData.phone))return void(0,o.Z)(this.$t("手机号格式有误"))}o.Z.loading({duration:0,message:this.$t("发送中"),forbidClick:!0});const t={target:`${this.dialCode} ${this.formData.phone}`};(0,h.TB)(t).then((()=>{o.Z.success(this.$t("发送成功")),this.timerFn()})).catch((t=>{o.Z.clear()}))},timerFn(){this.codeBtnTxt=`${this.$t("再次获取")} ${this.count} s`,this.btnDisabled=!0,this.interval=setInterval((()=>{1===this.count?(this.count=60,this.codeBtnTxt=this.$t("再次获取"),this.btnDisabled=!1,clearInterval(this.interval)):(this.count-=1,this.codeBtnTxt=`${this.$t("再次获取")} ${this.count} s`)}),1e3)},submitVertify(){if(""!==this.formData.phone){{const t=/^[0-9]+[0-9]*$/;if(!t.test(this.formData.phone))return void(0,o.Z)(this.$t("手机号格式有误"))}""!==this.formData.verifcode?this.show=!0:(0,o.Z)(this.$t("请输入验证码"))}else(0,o.Z)(this.$t("请输入手机号"))},submitHandle(){o.Z.loading({duration:0,message:this.$t("提交中"),forbidClick:!0});const t={...this.formData,phone:`${this.dialCode} ${this.formData.phone}`};(0,r.Ch)(t).then((async()=>{o.Z.success(this.$t("绑定成功")),await this.$store.dispatch("getUserInfo"),this.onClickLeft()})).catch((t=>{o.Z.clear()}))}}},m=d,f=s(1001),u=(0,f.Z)(m,e,a,!1,null,"3e770af5",null),A=u.exports},44499:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAATCAYAAACDW21BAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD3SURBVHgB3ZI9DoJAEEZn4QJaQucNNITE0tLWI3gC4xHsLD2Ona0F4B6BCryCBeBMgdkM2WWRxcKXwA6zP182PIB/R9AriqILDgf4AaItMPSGwwamRXptVVXVvmmaHCaCzsaMnVCbcRwv67qmm87AMRi2kFLmvtosiuIZBMFLCLEFh+B5xyzLrlT7fLIsy3sYhnMs1+AADDslSXL+fOsWOpJIpmm6UhuebuVYiVpJeF+YNo2RqJWE933Tpm8lUiUZFEgMlYhL0pkHSywl6kjC8cCSPol0knCsb0iYJNJJwun9hyo6iUySjAokuER9kjiDJMLnAQN5AwgPjbeTqmD3AAAAAElFTkSuQmCC"}}]);