"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[9509],{82437:function(t,i,e){e.r(i),e.d(i,{default:function(){return b}});var n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"page-content"},[i("cancel-dialog",{attrs:{"dialog-show":t.cancelShow,"dialog-data":t.currentData},on:{"update:dialogShow":function(i){t.cancelShow=i},"update:dialog-show":function(i){t.cancelShow=i},done:t.tableChange}}),i("reminds-dialog",{attrs:{"dialog-show":t.remindShow,"dialog-data":t.currentData},on:{"update:dialogShow":function(i){t.remindShow=i},"update:dialog-show":function(i){t.remindShow=i},done:t.tableChange}}),i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("我的订单"),"left-arrow":""},on:{"click-left":()=>t.$router.push({path:"/me",dir:"left"})}}),i("div",{staticClass:"nav-content"},[i("van-tabs",{on:{change:t.tableChange},model:{value:t.currentNav,callback:function(i){t.currentNav=i},expression:"currentNav"}},t._l(t.navData,(function(t,e){return i("van-tab",{key:e,attrs:{title:t.title,name:t.name}})})),1)],1),i("div",{staticStyle:{width:"100%",height:"90px"}}),i("van-pull-refresh",{staticClass:"pull-content",attrs:{"pulling-text":t.$t("下拉即可刷新"),"loosing-text":t.$t("释放即可刷新"),"loading-text":t.$t("加载中")},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(i){t.refreshing=i},expression:"refreshing"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.list.length?t.$t("没有更多了"):"","loading-text":t.$t("加载中")},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},[t.list.length?i("div",{staticClass:"list-content"},t._l(t.list,(function(e){return i("div",{key:e.id,staticClass:"item"},[i("div",{staticClass:"info-item"},[i("p",[t._v(t._s(t.$t("流水号"))+"：")]),i("div",[i("div",{on:{click:function(i){return t.copyHandle(e.id)}}},[i("span",{staticClass:"nowrap",staticStyle:{width:"200px"}},[t._v(t._s(e.id))]),i("img",{attrs:{src:t.copyIcon,alt:""}})])])]),i("div",{staticClass:"info-item"},[i("p",[t._v(t._s(t.$t("信息"))+"：")]),i("div",[i("div",[t._v(t._s(e.goodsCount)+" "+t._s(t.$t("个商品")))]),i("p",[t._v(t._s(t.$t("来自"))+" "+t._s(e.goodsFrom))])])]),i("div",{staticClass:"info-item money"},[i("p",[t._v(t._s(t.$t("金额"))+"：")]),i("div",[t._v("$"+t._s(t.priceFormat(e.priceCount)))])]),i("div",{staticClass:"info-item opreate"},[i("p",[t._v(t._s(t.$t("操作"))+"：")]),i("div",{on:{click:function(i){return t.openPage("/orderDetails",{id:e.id,returnStatus:e.returnStatus,index:t.currentNav})}}},[t._v(" "+t._s(t.$t("查看详情"))+" ")])]),-1!==Number(e.status)?i("div",{staticClass:"btn-content"},[0===Number(e.status)?i("div",{staticClass:"btn-item",on:{click:function(i){return t.cancleOrder(e)}}},[t._v(" "+t._s(t.$t("取消订单"))+" ")]):t._e(),0===Number(e.status)?i("div",{staticClass:"btn-item color",on:{click:function(i){return t.openPeddingPay(e)}}},[t._v(" "+t._s(t.$t("立即付款"))+" ")]):t._e(),1===Number(e.status)?i("div",{staticClass:"btn-item color",on:{click:function(i){return t.remindHandle(e)}}},[t._v(" "+t._s(t.$t("提醒发货"))+" ")]):t._e(),1===Number(e.status)?i("div",{staticClass:"btn-item",on:{click:function(i){return t.openPage("/orderRefund",{id:e.id,a:e.priceCount})}}},[t._v(" "+t._s(t.$t("申请退货"))+" ")]):t._e(),3===Number(e.status)?i("div",{staticClass:"btn-item color",on:{click:function(i){return t.orderPick(e)}}},[t._v(" "+t._s(t.$t("确认收货"))+" ")]):t._e(),4===Number(e.status)?i("div",{staticClass:"btn-item",on:{click:function(i){return t.openPage("/orderEvaluate",{id:e.id})}}},[t._v(" "+t._s(t.$t("立即评价"))+" ")]):t._e(),6===Number(e.status)?i("div",{staticClass:"tips"},[Boolean(e.returnStatus)?t._e():i("span",[t._v(t._s(t.$t("未退款")))]),1===Number(e.returnStatus)?i("span",{staticClass:"running"},[t._v(t._s(t.$t("退款中")))]):t._e(),2===Number(e.returnStatus)?i("span",{staticClass:"success"},[t._v(t._s(t.$t("退款成功")))]):t._e(),3===Number(e.returnStatus)?i("span",{staticClass:"fail"},[t._v(t._s(t.$t("退款失败")))]):t._e()]):t._e()]):t._e()])})),0):t._e(),t.list.length||t.loading?t._e():i("van-empty",{attrs:{description:t.$t("暂无数据")}})],1)],1),t._m(0),i("transition",{attrs:{name:"fade"}},[i("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isShowTopBtn,expression:"isShowTopBtn"}],staticClass:"to_top",attrs:{"class-prefix":"icon",name:"huidaodingbu"},on:{click:t.handleToTop}})],1)],1)},s=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"order-content"},[i("div",{staticClass:"item"})])}],a=(e(65825),e(19858)),r=(e(23324),e(75705)),o=(e(77987),e(84319)),l=(e(37850),e(88848)),c=(e(38148),e(73462)),h=(e(84805),e(47847)),u=(e(10008),e(95094)),d=(e(82012),e(64269)),g=(e(83627),e(90797)),f=e(32169),m=e(87177),p=e(10408),v=e(14970),x=e(15941),S={name:"Order",components:{[g.Z.name]:g.Z,[d.Z.name]:d.Z,[u.Z.name]:u.Z,[h.Z.name]:h.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[o.Z.name]:o.Z,[r.Z.name]:r.Z,CancelDialog:f.Z,RemindsDialog:m.Z,[a.Z.name]:a.Z},data(){return{isShowTopBtn:!1,copyIcon:e(78481),currentNav:"",navData:[{title:this.$t("全部"),name:""},{title:this.$t("待付款"),name:"0"},{title:this.$t("待发货"),name:"1"},{title:this.$t("待收货"),name:"3"},{title:this.$t("待评价"),name:"4"},{title:this.$t("退款/售后"),name:"6"}],loading:!1,finished:!1,refreshing:!1,pageNum:1,pageSize:10,list:[],cancelShow:!1,remindShow:!1,currentData:{},isToask:!0}},mounted(){window.addEventListener("scroll",(()=>{this.isShowTopBtn=document.documentElement.scrollTop||document.body.scrollTop>500}))},created(){if((0,p.bg)()){const{query:t}=this.$route;t&&t.type&&(this.currentNav=t.type)}else this.$router.push("/");this.onLoad()},methods:{copyHandle(t){this.$copyText(t).then((()=>{(0,l.Z)(this.$t("复制成功"))}),(()=>{(0,l.Z)(this.$t("复制失败"))}))},priceFormat(t){return(0,p.XY)(t)},onRefresh(){this.finished=!1,this.pageNum=1,this.loading=!0,this.onLoad(),this.isToask=!0},tableChange(t){l.Z.loading({duration:0,message:this.$t("加载中")}),this.list=[],this.onRefresh()},onLoad(){this.refreshing&&(this.list=[],this.refreshing=!1),this.getTableList()},getTableList(){const t={pageNum:this.pageNum,pageSize:this.pageSize};this.currentNav&&(t.status=Number(this.currentNav)),(0,v.es)(t).then((t=>{const{pageList:i}=t;this.list=1===this.pageNum?i:[...this.list,...i],this.pageNum++,this.loading=!1,l.Z.clear(),i.length<this.pageSize&&(this.finished=!0);var e={};this.list=this.list.reduce(((t,i)=>(!e[i.id]&&(e[i.id]=t.push(i)),t)),[])})).catch((()=>{this.loading=!1,this.finished=!0,l.Z.clear()}))},cancleOrder(t){this.currentData=t,this.cancelShow=!0},remindHandle(t){const i=localStorage.getItem("remindStore")?JSON.parse(localStorage.getItem("remindStore")):[];i.includes(t.id)?(0,l.Z)(this.$t("该订单已提醒过啦~")):(this.currentData=t,this.remindShow=!0)},openPage(t,i){const e={path:t};i&&(e.query=i),this.$router.push(e)},openPeddingPay(t){const i=[{orderList:t.id,orderId:t.id}];this.$router.push({path:"/PendingPayment",query:{orderList:JSON.stringify(i),total:t.priceCount}})},orderPick(t){r.Z.confirm({title:this.$t("提示"),message:this.$t("确认收货吗？"),confirmButtonText:this.$t("确认"),cancelButtonText:this.$t("取消")}).then((()=>{l.Z.loading({duration:0,message:this.$t("提交中"),forbidClick:!0});const i={orderId:t.id};(0,v.lI)(i).then((()=>{l.Z.clear(),(0,l.Z)(this.$t("收货成功")),this.isToask=!1,setTimeout((()=>{this.tableChange()}),1e3)})).catch((()=>{l.Z.clear()}))})).catch((()=>{x.log("cancel")}))},handleToTop(){scrollTo({top:0,left:0,behavior:"smooth"})}}},$=S,y=e(1001),_=(0,y.Z)($,n,s,!1,null,"344cbe48",null),b=_.exports},73462:function(t,i,e){e.d(i,{Z:function(){return u}});var n=e(32667),s=e(80408),a="van-empty-network-",r={render:function(){var t=arguments[0],i=function(i,e,n){return t("stop",{attrs:{"stop-color":i,offset:e+"%","stop-opacity":n}})};return t("svg",{attrs:{viewBox:"0 0 160 160",xmlns:"http://www.w3.org/2000/svg"}},[t("defs",[t("linearGradient",{attrs:{id:a+"1",x1:"64.022%",y1:"100%",x2:"64.022%",y2:"0%"}},[i("#FFF",0,.5),i("#F2F3F5",100)]),t("linearGradient",{attrs:{id:a+"2",x1:"50%",y1:"0%",x2:"50%",y2:"84.459%"}},[i("#EBEDF0",0),i("#DCDEE0",100,0)]),t("linearGradient",{attrs:{id:a+"3",x1:"100%",y1:"0%",x2:"100%",y2:"100%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("linearGradient",{attrs:{id:a+"4",x1:"100%",y1:"100%",x2:"100%",y2:"0%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("linearGradient",{attrs:{id:a+"5",x1:"0%",y1:"43.982%",x2:"100%",y2:"54.703%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("linearGradient",{attrs:{id:a+"6",x1:"94.535%",y1:"43.837%",x2:"5.465%",y2:"54.948%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("radialGradient",{attrs:{id:a+"7",cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54835 0 .5 -.5)"}},[i("#EBEDF0",0),i("#FFF",100,0)])]),t("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[t("g",{attrs:{opacity:".8"}},[t("path",{attrs:{d:"M0 124V46h20v20h14v58H0z",fill:"url(#"+a+"1)",transform:"matrix(-1 0 0 1 36 7)"}}),t("path",{attrs:{d:"M121 8h22.231v14H152v77.37h-31V8z",fill:"url(#"+a+"1)",transform:"translate(2 7)"}})]),t("path",{attrs:{fill:"url(#"+a+"7)",d:"M0 139h160v21H0z"}}),t("path",{attrs:{d:"M37 18a7 7 0 013 13.326v26.742c0 1.23-.997 2.227-2.227 2.227h-1.546A2.227 2.227 0 0134 58.068V31.326A7 7 0 0137 18z",fill:"url(#"+a+"2)","fill-rule":"nonzero",transform:"translate(43 36)"}}),t("g",{attrs:{opacity:".6","stroke-linecap":"round","stroke-width":"7"}},[t("path",{attrs:{d:"M20.875 11.136a18.868 18.868 0 00-5.284 13.121c0 5.094 2.012 9.718 5.284 13.12",stroke:"url(#"+a+"3)",transform:"translate(43 36)"}}),t("path",{attrs:{d:"M9.849 0C3.756 6.225 0 14.747 0 24.146c0 9.398 3.756 17.92 9.849 24.145",stroke:"url(#"+a+"3)",transform:"translate(43 36)"}}),t("path",{attrs:{d:"M57.625 11.136a18.868 18.868 0 00-5.284 13.121c0 5.094 2.012 9.718 5.284 13.12",stroke:"url(#"+a+"4)",transform:"rotate(-180 76.483 42.257)"}}),t("path",{attrs:{d:"M73.216 0c-6.093 6.225-9.849 14.747-9.849 24.146 0 9.398 3.756 17.92 9.849 24.145",stroke:"url(#"+a+"4)",transform:"rotate(-180 89.791 42.146)"}})]),t("g",{attrs:{transform:"translate(31 105)","fill-rule":"nonzero"}},[t("rect",{attrs:{fill:"url(#"+a+"5)",width:"98",height:"34",rx:"2"}}),t("rect",{attrs:{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.114"}}),t("rect",{attrs:{fill:"url(#"+a+"6)",x:"15",y:"12",width:"18",height:"6",rx:"1.114"}})])])])}},o=(0,n.d)("empty"),l=o[0],c=o[1],h=["error","search","default"],u=l({props:{imageSize:[Number,String],description:String,image:{type:String,default:"default"}},methods:{genImageContent:function(){var t=this.$createElement,i=this.slots("image");if(i)return i;if("network"===this.image)return t(r);var e=this.image;return-1!==h.indexOf(e)&&(e="https://img01.yzcdn.cn/vant/empty-image-"+e+".png"),t("img",{attrs:{src:e}})},genImage:function(){var t=this.$createElement,i={width:(0,s.N)(this.imageSize),height:(0,s.N)(this.imageSize)};return t("div",{class:c("image"),style:i},[this.genImageContent()])},genDescription:function(){var t=this.$createElement,i=this.slots("description")||this.description;if(i)return t("p",{class:c("description")},[i])},genBottom:function(){var t=this.$createElement,i=this.slots();if(i)return t("div",{class:c("bottom")},[i])}},render:function(){var t=arguments[0];return t("div",{class:c()},[this.genImage(),this.genDescription(),this.genBottom()])}})},38148:function(t,i,e){e(22184)},65825:function(t,i,e){e(22184),e(14106),e(4127)},64269:function(t,i,e){var n=e(32667),s=e(64292),a=e(8161),r=e(35590),o=e(94958),l=(0,n.d)("list"),c=l[0],h=l[1],u=l[2];i["Z"]=c({mixins:[(0,r.X)((function(t){this.scroller||(this.scroller=(0,a.Ob)(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var i,e=t.$el,n=t.scroller,a=t.offset,r=t.direction;i=n.getBoundingClientRect?n.getBoundingClientRect():{top:0,bottom:n.innerHeight};var o=i.bottom-i.top;if(!o||(0,s.x)(e))return!1;var l=!1,c=t.$refs.placeholder.getBoundingClientRect();l="up"===r?i.top-c.top<=a:c.bottom-i.bottom<=a,l&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{key:"loading",class:h("loading")},[this.slots("loading")||t(o.Z,{attrs:{size:"16"}},[this.loadingText||u("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var i=this.slots("finished")||this.finishedText;if(i)return t("div",{class:h("finished-text")},[i])}},genErrorText:function(){var t=this.$createElement;if(this.error){var i=this.slots("error")||this.errorText;if(i)return t("div",{on:{click:this.clickErrorText},class:h("error-text")},[i])}}},render:function(){var t=arguments[0],i=t("div",{ref:"placeholder",key:"placeholder",class:h("placeholder")});return t("div",{class:h(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():i,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():i])}})},82012:function(t,i,e){e(22184),e(43874)},84319:function(t,i,e){var n=e(32667),s=e(85781),a=e(8161),r=e(93969),o=e(94958),l=(0,n.d)("pull-refresh"),c=l[0],h=l[1],u=l[2],d=50,g=["pulling","loosing","success"];i["Z"]=c({mixins:[r.D],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:[Number,String],value:{type:Boolean,required:!0},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:d}},data:function(){return{status:"normal",distance:0,duration:0}},computed:{touchable:function(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},headStyle:function(){if(this.headHeight!==d)return{height:this.headHeight+"px"}}},watch:{value:function(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.slots("success")||this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted:function(){this.bindTouchEvent(this.$refs.track),this.scrollEl=(0,a.Ob)(this.$el)},methods:{checkPullStart:function(t){this.ceiling=0===(0,a.cx)(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart:function(t){this.touchable&&this.checkPullStart(t)},onTouchMove:function(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&((0,s.PF)(t),this.setStatus(this.ease(this.deltaY))))},onTouchEnd:function(){var t=this;this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.$emit("input",!0),this.$nextTick((function(){t.$emit("refresh")}))):this.setStatus(0))},ease:function(t){var i=+(this.pullDistance||this.headHeight);return t>i&&(t=t<2*i?i+(t-i)/2:1.5*i+(t-2*i)/4),Math.round(t)},setStatus:function(t,i){var e;e=i?"loading":0===t?"normal":t<(this.pullDistance||this.headHeight)?"pulling":"loosing",this.distance=t,e!==this.status&&(this.status=e)},genStatus:function(){var t=this.$createElement,i=this.status,e=this.distance,n=this.slots(i,{distance:e});if(n)return n;var s=[],a=this[i+"Text"]||u(i);return-1!==g.indexOf(i)&&s.push(t("div",{class:h("text")},[a])),"loading"===i&&s.push(t(o.Z,{attrs:{size:"16"}},[a])),s},showSuccessTip:function(){var t=this;this.status="success",setTimeout((function(){t.setStatus(0)}),this.successDuration)}},render:function(){var t=arguments[0],i={transitionDuration:this.duration+"ms",transform:this.distance?"translate3d(0,"+this.distance+"px, 0)":""};return t("div",{class:h()},[t("div",{ref:"track",class:h("track"),style:i},[t("div",{class:h("head"),style:this.headStyle},[this.genStatus()]),this.slots()])])}})},77987:function(t,i,e){e(22184),e(43874)},97799:function(t,i,e){e.d(i,{Wn:function(){return l},d1:function(){return c}});var n=e(53370),s=Date.now();function a(t){var i=Date.now(),e=Math.max(0,16-(i-s)),n=setTimeout(t,e);return s=i+e,n}var r=n.sk?e.g:window,o=r.requestAnimationFrame||a;r.cancelAnimationFrame||r.clearTimeout;function l(t){return o.call(r,t)}function c(t){l((function(){l(t)}))}},64292:function(t,i,e){function n(t){var i=window.getComputedStyle(t),e="none"===i.display,n=null===t.offsetParent&&"fixed"!==i.position;return e||n}e.d(i,{x:function(){return n}})}}]);