(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-79bc161e"],{"0475":function(t,e,s){},2650:function(t,e,s){"use strict";s("e02e");var i=s("6eef"),a=s("8c1b"),r=s("7035"),l=s("4260"),o=s("6ad0"),n=s("b891"),c=(s("0475"),s("3191"));n={name:"EsProductionInfo",props:{id:{type:String,default:"0"}},components:{vuePhotoZoomPro:n.c,ImgZoomer:n.b,ImgPreview:n.a},data(){return{itemname:"SM-wholesale shop",currentIndex:0,swiperOptionTop:{centeredSlides:!0,spaceBetween:10,autoplay:{delay:2500,disableOnInteraction:!1},thumbs:{swiper:{el:".gallery-thumbs",spaceBetween:10,slidesPerView:"auto",slideToClickedSlide:!0,watchSlidesVisibility:!0},slideThumbActiveClass:"slide-thumb-active"}},num:1,minbuy:1,goodsAttrObj:{},showOnlieService:!1,loading:!1,isCollect:!1,canSelectAttributes:[],price:null,curIndex:0,currentSkuTitle:[],imgList:"",skuPrice:null,maxNum:100,isIntDis:!0,show:!0,min:1}},computed:{...Object(i.c)({productDetails:"productDetails/productDetails"}),...Object(i.c)(["isLogin"]),totalPrice(){var t;return this.price?Object(l.f)(this.$big(this.num).times(this.price)):Object(l.f)(this.$big(this.num).times(null!=(t=null!=(t=this.productDetails.discountPrice)?t:this.productDetails.sellingPrice)?t:0))},productImgs(){return new Array(10).fill("").map((t,e)=>this.productDetails["imgUrl"+(e+1)]).filter(t=>!!t)}},watch:{productDetails:{handler(t,e){var s;this.minbuy=null!=(s=t.minbuy)?s:"1",t.canSelectAttributes?null!=(s=t.canSelectAttributes)&&s.goodAttrs.length&&(null!=(s=t.canSelectAttributes)&&s.goodAttrs.forEach(t=>{this.goodsAttrObj[t.attrId]=t.attrValues[0].attrValueId}),this.getAttrNameAndSkuId()):this.isIntDis=!1},deep:!0,immediate:!0}},async mounted(){if(sessionStorage.setItem("path","1"),this.maxNum=Number(localStorage.getItem("maxBuy")||100),this.id&&"0"!==this.id)try{this.loading=!0,await this.requestProductDetails({sellerGoodsId:this.id})}finally{this.loading=!1}o.a.$on("cancelKeep",t=>{this.productDetails.id==t&&this.info()}),o.a.$on("keepProduct",t=>{this.productDetails.id==t&&this.info()})},beforeDestroy(){localStorage.setItem("seller_cache",JSON.stringify({id:this.productDetails.seller.id,name:this.productDetails.seller.name})),this.updateProductDetails({seller:{}})},methods:{numberFormatA:l.g,async info(){await this.requestProductDetails({sellerGoodsId:this.id,token:localStorage.getItem(a.h)})},mouseEnter(){this.$refs.swiperTop.$swiper.autoplay.stop()},mouseLeave(){this.$refs.swiperTop.$swiper.autoplay.start()},changeColor(t,e){this.currentIndex=t},numberFormatFn(t){return Object(l.f)(t)},inputNumBlur(){var t=localStorage.getItem("maxBuy");/^[1-9][0-9]*$/.test(this.num)?(null==this.num&&(this.num="1"),this.num>t&&(this.num=t)):this.num="1"},...Object(i.b)({requestProductDetails:"productDetails/requestProductDetails",requestCollectGoods:"user/requestCollectGoods",requestCollectGoodsDel:"user/requestCollectGoodsDel"}),...Object(i.d)({updateCheckProductPay:"shopCart/updateCheckProductPay",updateProductDetails:"productDetails/updateProductDetails"}),onSlideChange(){this.curIndex=this.$refs.swiperTop.$swiper.activeIndex},change(t){this.$refs.swiperTop.$swiper.slideTo(t),this.curIndex=t},changeGoodAttr(t,e,s,i){var a={...this.goodsAttrObj};a[t]=e,this.goodsAttrObj=a;const r=new Set;a=null==(a=this.productDetails)||null==(a=a.canSelectAttributes)?void 0:a.goodAttrs;const l=JSON.parse(JSON.stringify(this.goodsAttrObj));a.length===Object.keys(this.goodsAttrObj).length&&a.forEach((t,e)=>{e!=s&&t.attrValues.forEach((e,s)=>{l[t.attrId]=e.attrValueId;var i=this.getAttrNameAndSkuId(!0,l)["skuId"];-1==i&&r.add(e.attrValueId)})}),null!=(a=this.productDetails)&&null!=(a=a.canSelectAttributes)&&a.goodAttrs.forEach(t=>{t.attrValues.forEach(t=>{t.disabled=r.has(t.attrValueId)})}),this.getAttrNameAndSkuId(),i||this.changeGoodAttr(t,e,s,!0)},getAttrNameAndSkuId(t,e){var s=(null!=(s=this.productDetails.canSelectAttributes)?s:{})["skus"];e&&"undefined"in e&&delete e[void 0];const i=t?Object.keys(e):Object.keys(this.goodsAttrObj),a=t?e:this.goodsAttrObj;t=(null==s?void 0:s.find(t=>{let e=0;return t.attrs&&0<t.attrs.length&&t.attrs.forEach(t=>{i.includes(t.attrId)&&t.attrValueId==a[t.attrId]&&(e+=1)}),e==i.length}))||{skuId:-1};let r="";const l=null==(e=this.productDetails.canSelectAttributes)?void 0:e.goodAttrs;return 0<i.length&&i.forEach(t=>{var e=l.find(e=>e.attrId==t),s=e.attrValues.find(e=>e.attrValueId===this.goodsAttrObj[t])["attrValueName"];r+=e.attrName+` : ${s}   `}),this.currentSkuTitle=r.split("   "),this.price=t.discountPrice||t.sellingPrice||this.productDetails.price,this.skuPrice=t.sellingPrice,this.imgList=null===t?void 0:t.img,this.isIntDis=-1==t.skuId,{checkAttrName:r,img:t.img,skuId:0==(null==(s=t.attrs)?void 0:s.length)?"-1":t.skuId,price:this.price}},buy(){if(this.isLogin)if(this.productDetails.isShelf){const{skuId:e,checkAttrName:s,price:i}=this.getAttrNameAndSkuId();var t=null==(t=this.productDetails.canSelectAttributes)?void 0:t.skus;t=null==t?void 0:t.find(t=>t.skuId==e),t=null==t?void 0:t.coverImg;this.updateCheckProductPay([{title:this.productDetails.name,checkList:[(new Date).getTime()],checkAll:!0,isIndeterminate:!1,list:[{...this.productDetails,checkTotal:this.num,skuid:e,checkAttrName:s,price:i,tempId:(new Date).getTime(),zoomImg:t||this.productDetails.imgUrl1}]}]),this.$router.push("/settlement"),this.$emit("handleBuy")}else this.$message({type:"warning",message:this.$t("message.home.productAvailable")});else this.$router.push("/login"),this.$emit("handleBuy")},async addCard(){if(!this.isIntDis&&!Object(r.a)())if(this.productDetails.isShelf){const i=await Object(c.o)({page:1,size:100});var t=i.data.pageList;const a=this.getAttrNameAndSkuId()["skuId"];var e=null==(e=this.productDetails.canSelectAttributes)?void 0:e.skus;e=null==e?void 0:e.find(t=>t.skuId==a),e=(null==e||e.coverImg,this.num);const r=this.productDetails.seller.name;var s=t.some(t=>-1!==a?t.skuId==a:t.goodsId==this.productDetails.id);t=(this.isIntDis=!1,t.filter(t=>t.sellerName==r));if(s&&t.length)this.$message({message:this.$t("message.home.addCartMessageFaild"),type:"warning"});else{s={skuId:a,sellerGoodsId:this.productDetails.id,sellerId:this.productDetails.sellerId,buyNum:e,tempId:(new Date).getTime().toString()};await Object(c.n)(s);o.a.$emit("Add",!0),this.$message({message:this.$t("message.home.addCartMessage"),type:"success"})}}else this.$message({type:"warning",message:this.$t("message.home.productAvailable")})},async collectEvent(){if(!Object(r.a)())try{1===this.productDetails.isKeep?(await this.requestCollectGoodsDel({sellerGoodsId:this.productDetails.id,token:localStorage.getItem(a.h)}),this.$message.warning(this.$t("message.home.cancelSuccess")),o.a.$emit("updateCollect",this.productDetails.id)):(await this.requestCollectGoods({sellerGoodsId:this.productDetails.id,token:localStorage.getItem(a.h)}),this.$message.success(this.$t("message.home.collectionSuccess")),o.a.$emit("updateUnKeep",this.productDetails.id)),await this.requestProductDetails({sellerGoodsId:this.id,token:localStorage.getItem(a.h)})}catch(t){}},showServiceDialog(){var t,e;Object(r.a)()||(t=this.productDetails.seller.id,e=this.productDetails.seller.name,Object(l.h)(this.$store.state.token,t,e,this.productDetails.id))}}},s("7f29"),i=s("b01b"),s=Object(i.a)(n,(function(){var t,e=this,s=e._self._c;return e.show?s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"product-info"},[s("div",{staticClass:"product-info-content flex-start"},[s("div",{staticClass:"product-info-left"},[s("vue-photo-zoom-pro",{attrs:{"out-zoomer":!0}},[s("swiper",{ref:"swiperTop",staticClass:"swiper gallery-top",attrs:{options:e.swiperOptionTop},on:{slideChange:function(t){return e.onSlideChange()}},nativeOn:{mouseenter:function(t){return e.mouseEnter.apply(null,arguments)},mouseleave:function(t){return e.mouseLeave.apply(null,arguments)}}},e._l(e.imgList||e.productImgs,(function(t,e){return s("swiper-slide",{key:e},[s("img-preview",{attrs:{url:t}})],1)})),1),s("template",{slot:"zoomer"},[s("img-zoomer",{attrs:{url:(e.imgList||e.productImgs)[e.curIndex]}})],1)],2),s("swiper",{ref:"swiperThumbs",staticClass:"swiper gallery-thumbs",attrs:{options:e.swiperOptionTop.thumbs.swiper}},e._l(e.imgList||e.productImgs,(function(t,i){return s("swiper-slide",{key:i,class:i==e.curIndex?"active":"",nativeOn:{click:function(t){return e.change(i)}}},[s("img",{attrs:{src:t,alt:""}})])})),1)],1),s("div",{staticClass:"product-info-right"},[s("h1",{staticClass:"product-info-right-title"},[e._v(" "+e._s(e.productDetails.name)+" ")]),s("div",{staticClass:"product-info-right-info"},[s("div",{staticClass:"product-info-right-info-top flex-between"},[s("div",{staticClass:"product-info-right-info-price flex-start"},[s("h2",[e._v(e._s(e.$t("message.home.retailPrice")))]),s("span",{staticClass:"price"},[e._v("$"+e._s(e.numberFormatFn(null!=(t=null!=(t=this.price)?t:e.productDetails.discountPrice)?t:e.productDetails.sellingPrice)))])]),[null,void 0].includes(e.productDetails.discountPrice)?e._e():s("div",{staticClass:"product-info-right-info-price del flex-start"},[s("h2",[e._v(e._s(e.$t("message.home.originPrice")))]),s("span",{staticClass:"price"},[e._v("$"+e._s(e.numberFormatFn(null!=(t=this.skuPrice)?t:e.productDetails.sellingPrice)))])]),s("div",{staticClass:"product-info-right-info-tool flex-start"},[s("div",{staticClass:"product-info-right-info-tool-item flex-start",on:{click:e.showServiceDialog}},[s("i",{staticClass:"el-icon-service",staticStyle:{color:"var(--color-main)","font-size":"20px"}}),"FamilyMart"==e.itemname?s("span",[e._v(e._s(e.$t("message.home.联系商家")))]):s("span",[e._v(e._s(e.$t("message.home.service")))])]),s("div",{staticClass:"product-info-right-info-tool-item flex-start",on:{click:e.collectEvent}},[s("i",{class:1===e.productDetails.isKeep?"el-icon-star-on":"el-icon-star-off"}),s("span",[e._v(e._s(e.$t("message.home.collect")))])])])]),s("div",{staticClass:"product-info-right-info-des"},[s("div",{staticClass:"product-info-right-info-des-item flex-start"},[s("div",[s("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(e.$t("message.home.sold")))]),s("span",[e._v(e._s(e.numberFormatA(e.productDetails.soldNum)))])]),s("div",[s("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(e.$t("message.home.pageviews")))]),s("span",[e._v(e._s(e.numberFormatA(e.productDetails.viewsNum)))])])]),s("div",{staticClass:"product-info-right-info-des-item flex-start"},[s("span",{staticClass:"label-title"},[e._v(" "+e._s(e.$t("message.home.goodsShip"))+" ")]),s("span",[e._v(e._s(e.$t("message.home.goodsShipTips")))])]),s("div",{staticClass:"product-info-right-info-des-item flex-start"},[s("span",{staticClass:"label-title"},[e._v(" "+e._s(e.$t("message.home.goodsFreight"))+" ")]),s("div",{staticClass:"freight-tips"},[s("p",[e._v(" "+e._s(0===Number(e.productDetails.freightAmount)?e.$t("message.home.goodsFreeShipping"):"$"+e.numberFormatFn(null!=(t=e.productDetails.freightAmount)?t:0))+" ")]),s("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"line-height":"18px"}},[e._v(" "+e._s(e.$t("message.home.goodsFreightTips1"))+" ")]),s("p",{staticStyle:{"line-height":"18px"}},[e._v(" "+e._s(e.$t("message.home.goodsFreightTips2"))+" ")]),s("p",{staticStyle:{"line-height":"18px"}},[e._v(" "+e._s(e.$t("message.home.goodsFreightTips3"))+" ")])]),s("i",{staticClass:"el-icon-info"})])],1)]),s("div",{staticClass:"product-info-right-info-des-item flex-start"},[s("span",{staticClass:"label-title"},[e._v(" "+e._s(e.$t("message.home.quantity"))+" ")]),s("el-input-number",{key:e.productDetails.buyMin,attrs:{min:null!=(t=e.productDetails.buyMin)?t:1,max:e.maxNum},on:{blur:e.inputNumBlur},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1),e.productDetails.canSelectAttributes?s("div",e._l(e.productDetails.canSelectAttributes.goodAttrs,(function(t,i){return s("div",{key:t.attrId,staticClass:"product-info-right-info-des-item flex-start product-attr"},[s("span",{staticClass:"label-title sku-titile"},[e._v(" "+e._s(e.currentSkuTitle[i])+" ")]),t.attrValues[0].icon?s("div",{staticClass:"attr-container"},e._l(t.attrValues,(function(a,r){return s("div",{key:a.attrValueId,class:["attr-item",e.currentIndex==r&&"active",a.disabled&&"disabled"],on:{click:function(t){a.disabled||e.changeColor(r,a)}}},[s("div",{staticClass:"attr-img",on:{click:function(s){a.disabled||e.changeGoodAttr(t.attrId,a.attrValueId,i)}}},[s("img",{attrs:{src:a.iconImg,alt:""}})])])})),0):s("el-select",{attrs:{value:e.goodsAttrObj[t.attrId],placeholder:""+e.$t("message.home.Opt")+t.attrName},on:{change:s=>e.changeGoodAttr(t.attrId,s)}},e._l(t.attrValues,(function(t){return s("el-option",{key:t.attrValueId,attrs:{value:t.attrValueId,label:t.attrValueName,disabled:t.disabled}})})),1)],1)})),0):e._e(),s("div",{staticClass:"product-info-right-info-des-item flex-start"},[s("span",{staticClass:"label-title"},[e._v(" "+e._s(e.$t("message.home.totalPrice"))+" ")]),s("p",[s("span",{staticClass:"price"},[e._v("$"+e._s(e.totalPrice))])])])]),s("div",{staticClass:"product-info-right-info-buy"},[s("el-button",{attrs:{type:"primary",disabled:e.isIntDis},on:{click:e.buy}},[e._v(" "+e._s(e.$t("message.home.buyNow"))+" ")]),s("div",{class:["addcart","flex-start",e.isIntDis&&"disBtn"],on:{click:e.addCard}},[s("span",[e._v(" "+e._s(e.$t("message.home.addCart"))+" ")])])],1)])])]),s("EsOnlineServiceView",{model:{value:e.showOnlieService,callback:function(t){e.showOnlieService=t},expression:"showOnlieService"}})],1):e._e()}),[],!1,null,null,null);e.a=s.exports},"7f29":function(t,e,s){"use strict";s("c4cc")},c4cc:function(t,e,s){}}]);